function renderCharts(){console.log("rendering charts...");$("[data-chart-type='sankey']").each(function(n,t){google.charts.load("current",{packages:["sankey"]});google.charts.setOnLoadCallback(function(){drawSankeyChart(t)})});$("[data-chart-type='combo']").each(function(){$(this).highcharts("Combo",{})});$("[data-chart-type='key-ratio']").each(function(){$(this).highcharts("Combo",{chart:{marginBottom:75,spacingBottom:0},plotOptions:{areaspline:{lineWidth:0}},legend:{enabled:!0,layout:"vertical"},tooltip:{formatter:function(){var t=this.series.name,n=this.key;return($.isNumeric(n)||t===n)&&(n=""),"<b>"+t+"<\/b><br/><i>"+n+"<\/i><br/>"+Highcharts.dateFormat("%e-%b-%Y",new Date(this.x))+"<br/> Value: "+Highcharts.numberFormat(this.y,2,".",",")+" "}},series:[{},{lineWidth:0}]})});$("[data-chart-type='fixed-placement']").each(function(){$(this).highcharts("Combo",{plotOptions:{bar:{grouping:!0,borderWidth:0,groupPadding:0,pointPadding:0}},yAxis:{max:100},series:[{color:"rgba(165,170,217,.5)",pointPadding:.1,zIndex:100},{color:"rgba(126,86,134,.9)",pointPadding:.2},{color:"rgba(186,60,61,.9)",pointPadding:.3}]})});$("[data-chart-type='primary']").each(function(){$(this).highcharts("Combo",{xAxis:[{tickPositions:null,labels:{enabled:!0}}],yAxis:[{tickPositions:null}]})})}function drawSankeyChart(n){var i=$(n).data("series");console.log(i);var u=google.visualization.arrayToDataTable(i[0].data),t=new google.visualization.DataView(u),f=google.visualization.data.max(t.getDistinctValues(2)),e=t.getFilteredRows([{column:2,minValue:f*.008}]);t.setRows(e);var r=["#a6cee3","#b2df8a","#fb9a99","#fdbf6f","#cab2d6","#ffff99","#1f78b4","#33a02c"],o={tooltip:{isHtml:!0},sankey:{iterations:128,node:{interactivity:!0,nodePadding:15,width:15,colors:r,label:{fontSize:12}},link:{colorMode:"source",colors:r}}},s=new google.visualization.Sankey(n);s.draw(t,o)}function tooltip(n,t,i){return"<div style='background-color:red'>"+i+"<\/div>"}function DefaultChart(n,t,i,r){var h=typeof n=="string"||n.nodeName,u=arguments[h?1:0],o=Highcharts.merge(u,r),f,e;o.xAxis=Highcharts.merge(r.xAxis,u.xAxis);o.yAxis=Highcharts.merge(r.yAxis,u.yAxis);u=o;var c=$(n).data("series"),s=$(n).data("annotations"),l=0;return $.each(c,function(n,t){var i=u.series[l++];$.extend(!0,t,i)}),u.series=c,s!==undefined&&s.length>0&&$.each(s,function(n,t){var i={name:t.Name,type:"scatter",dashStyle:"Dot",lineWidth:0,yAxis:"annotations",visible:t.Visible,data:[]};$.each(t.Items,function(n,t){var r={x:t.value,y:1,name:t.text};i.data.push(r)});u.series.push(i)}),f=h?new Highcharts.Chart(n,u,i):new Highcharts.Chart(u,t),e=[],$.each(f.series,function(n,t){var u=t.options.focus,i,r;u==="last"&&(i=t.points,r=i[i.length-1],e.push(r))}),e.length>0&&f.tooltip.refresh(e),f.reflow(),f}$(function(){Highcharts.theme={colors:["#058DC7","#64E572","#FF9655","#FFF263","#6AF9C4","#50B432","#ED561B","#DDDF00"],chart:{backgroundColor:null,borderWidth:0,style:{overflow:"visible"},skipClone:!0},lang:{thousandsSep:","},title:{text:""},credits:{enabled:!1},xAxis:[{lineWidth:0,gridLineWidth:0,gridLineColor:"#eeeeee",type:"datetime",labels:{enabled:!1},title:{text:null},startOnTick:!1,endOnTick:!1,maxPadding:0,minPadding:0,tickPositions:[]}],yAxis:[{gridLineWidth:0,gridLineColor:"#eeeeee",endOnTick:!1,startOnTick:!1,labels:{enabled:!1},title:{text:null},tickPositions:[]},{id:"annotations",reversed:!0,visible:!1}],legend:{enabled:!0,layout:"horizontal",itemWidth:200,itemStyle:{fontWeight:"bold",width:"180%",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},useHTML:!0},plotOptions:{pie:{dataLabels:{enabled:!1},showInLegend:!0},areaspline:{pointPlacement:null,marker:{radius:0},tooltip:{pointFormat:"<b>{point.y:,.0f}<br/>{point.x:%b %e %Y}"}},column:{pointPadding:0},line:{},scatter:{marker:{enabled:!0,symbol:"circle",radius:5},tooltip:{pointFormat:"<b>{point.name}<\/b><br/>{point.x:%b %e %Y}"}},series:{stacking:"normal",enabledMouseTracking:!1,animation:{duration:1750},lineWidth:2,shadow:!1,states:{hover:{lineWidth:2}},marker:{symbol:"circle",states:{hover:{radius:5}}},fillOpacity:.25}}};Highcharts.setOptions(Highcharts.theme);var t=null,n=!1;$("body").on("mouseenter",".lineitem-cell,.lineitem-sparkline",function(){if(!n){t=this;var i=this;n=!0;setTimeout(function(){if(t===i){if($(i).find(".lineitem-sparkline").exists()){$(i).find(".lineitem-sparkline").fadeIn();return}var r=$(i).data("series"),n=document.createElement("div");n.className="lineitem-sparkline";$(n).data("series",r);$(i).prepend(n);$(n).highcharts("SparkLine",{plotOptions:{series:{animation:{duration:750}}}})}},200)}});$("body").on("mouseleave",".lineitem-cell",function(){n=!1;var t=this;setTimeout(function(){$(t).find(".lineitem-sparkline").fadeOut()},500)})});$(function(){renderCharts()});jQuery.fn.exists=function(){return this.length>0};Highcharts.SparkLine=function(n,t,i){var u=typeof n=="string"||n.nodeName,r=arguments[u?1:0],f={chart:{renderTo:r.chart&&r.chart.renderTo||this,margin:[0,0,0,0]},tooltip:{enabled:!1},legend:{enabled:!1},series:[]};return DefaultChart(n,t,i,f)};Highcharts.Combo=function(n,t,i){var e=$(n).data("highchartsChart"),s=$(n).attr("id");if(!(e>-1)){var o=typeof n=="string"||n.nodeName,r=arguments[o?1:0],u={chart:{renderTo:r.chart&&r.chart.renderTo||this},series:[]},f=Highcharts.merge(u,r);return f.xAxis=Highcharts.merge(u.xAxis,r.xAxis),f.yAxis=Highcharts.merge(u.yAxis,r.yAxis),DefaultChart(n,t,i,f)}};