/*!
 * jQuery Typeahead
 * Copyright (C) 2016 RunningCoder.org
 * Licensed under the MIT license
 *
 * @author Tom Bertrand
 * @version 2.7.6 (2016-12-23)
 * @link http://www.runningcoder.org/jquerytypeahead/
 */
function openSidenav(n){$(".test").is(":visible")||(sidenavTimer=setTimeout(function(){var n=$("#global-sidenav");n.addClass("open");console.log("open");$(".darken").fadeIn();$(".top-nav").addClass("sidenav-open")},n))}function closeSidenav(){if(!$(".test").is(":visible")){console.log("close");clearTimeout(sidenavTimer);var n=$("#global-sidenav");n.removeClass("open");$(".darken").fadeOut();$(".account").hide();$(".top-nav").removeClass("sidenav-open")}}function toggleSidenav(n){var t=$("#global-sidenav");t.width()>200?(console.log("closing"),closeSidenav()):(console.log("opening"),openSidenav(n))}function DefaultChart(n,t,i,r){var o=typeof n=="string"||n.nodeName,u=arguments[o?1:0],u=Highcharts.merge(r,u),s=$(n).data("series"),h=0,f,e;return $.each(s,function(n,t){var i=u.series[h++];$.extend(!0,t,i)}),u.series=s,f=o?new Highcharts.Chart(n,u,i):new Highcharts.Chart(u,t),e=[],$.each(f.series,function(n,t){var u=t.options.focus,i,r;u==="last"&&(i=t.points,r=i[i.length-1],e.push(r))}),e.length>0&&f.tooltip.refresh(e),f.reflow(),f}(function(n){typeof define=="function"&&define.amd?define("jquery-typeahead",["jquery"],function(t){return n(t)}):typeof module=="object"&&module.exports?module.exports=function(t,i){return t===undefined&&(t=typeof window!="undefined"?require("jquery"):require("jquery")(i)),n(t)}():n(jQuery)})(function(n){"use strict";var f,t;window.Typeahead={version:"2.7.6"};var e={input:null,minLength:2,maxItem:8,dynamic:!1,delay:300,order:null,offset:!1,hint:!1,accent:!1,highlight:!0,group:!1,groupOrder:null,maxItemPerGroup:null,dropdownFilter:!1,dynamicFilter:null,backdrop:!1,backdropOnFocus:!1,cache:!1,ttl:36e5,compression:!1,suggestion:!1,searchOnFocus:!1,resultContainer:null,generateOnLoad:null,mustSelectItem:!1,href:null,display:["display"],template:null,groupTemplate:null,correlativeTemplate:!1,emptyTemplate:!1,cancelButton:!0,loadingAnimation:!0,filter:!0,matcher:null,source:null,callback:{onInit:null,onReady:null,onShowLayout:null,onHideLayout:null,onSearch:null,onResult:null,onLayoutBuiltBefore:null,onLayoutBuiltAfter:null,onNavigateBefore:null,onNavigateAfter:null,onMouseEnter:null,onMouseLeave:null,onClickBefore:null,onClickAfter:null,onDropdownFilter:null,onSendRequest:null,onReceiveRequest:null,onPopulateSource:null,onCacheSave:null,onSubmit:null,onCancel:null},selector:{container:"typeahead__container",result:"typeahead__result",list:"typeahead__list",group:"typeahead__group",item:"typeahead__item",empty:"typeahead__empty",display:"typeahead__display",query:"typeahead__query",filter:"typeahead__filter",filterButton:"typeahead__filter-button",dropdown:"typeahead__dropdown",dropdownItem:"typeahead__dropdown-item",button:"typeahead__button",backdrop:"typeahead__backdrop",hint:"typeahead__hint",cancelButton:"typeahead__cancel-button"},debug:!1},r=".typeahead",u={from:"ãàáäâẽèéëêìíïîõòóöôùúüûñç",to:"aaaaaeeeeeiiiiooooouuuunc"},o=~window.navigator.appVersion.indexOf("MSIE 9."),s=~window.navigator.appVersion.indexOf("MSIE 10"),h=~window.navigator.userAgent.indexOf("Trident")&&~window.navigator.userAgent.indexOf("rv:11"),i=function(n,t){this.rawQuery=n.val()||"";this.query=n.val()||"";this.namespace="."+r;this.tmpSource={};this.source={};this.isGenerated=null;this.generatedGroupCount=0;this.groupCount=0;this.groupBy="group";this.groups=[];this.result={};this.groupTemplate="";this.resultHtml=null;this.resultCount=0;this.resultCountPerGroup={};this.options=t;this.node=n;this.namespace="."+this.helper.slugify.call(this,n.selector)+r;this.container=null;this.resultContainer=null;this.item=null;this.xhr={};this.hintIndex=null;this.filters={dropdown:{},dynamic:{}};this.dropdownFilter={"static":[],dynamic:[]};this.dropdownFilterAll=null;this.isDropdownEvent=!1;this.requests={};this.backdrop={};this.hint={};this.hasDragged=!1;this.focusOnly=!1;this.__construct()};return i.prototype={extendOptions:function(){var r,i,f;if(this.options.dynamic&&(this.options.cache=!1,this.options.compression=!1),r=this,this.options.cache&&(this.options.cache=function(n){var i;if(n===!0)n="localStorage";else if(typeof n=="string"&&!~["localStorage","sessionStorage"].indexOf(n))return r.options.debug&&(t.log({node:r.node.selector,"function":"extendOptions()",message:'Invalid options.cache, possible options are "localStorage" or "sessionStorage"'}),t.print()),!1;i=typeof window[n]!="undefined";try{window[n].setItem("typeahead","typeahead");window[n].removeItem("typeahead")}catch(u){i=!1}return i&&n||!1}.call(this,this.options.cache)),this.options.compression&&(typeof LZString=="object"&&this.options.cache||(this.options.debug&&(t.log({node:this.node.selector,"function":"extendOptions()",message:"Missing LZString Library or options.cache, no compression will occur."}),t.print()),this.options.compression=!1)),typeof this.options.maxItem=="undefined"||/^\d+$/.test(this.options.maxItem)&&this.options.maxItem!==0||(this.options.maxItem=Infinity),this.options.maxItemPerGroup&&!/^\d+$/.test(this.options.maxItemPerGroup)&&(this.options.maxItemPerGroup=null),this.options.display&&!Array.isArray(this.options.display)&&(this.options.display=[this.options.display]),this.options.group&&(Array.isArray(this.options.group)?this.options.debug&&(t.log({node:this.node.selector,"function":"extendOptions()",message:"options.group must be a boolean|string|object as of 2.5.0"}),t.print()):(typeof this.options.group=="string"?this.options.group={key:this.options.group}:typeof this.options.group=="boolean"&&(this.options.group={key:"group"}),this.options.group.key=this.options.group.key||"group")),this.options.highlight&&!~["any",!0].indexOf(this.options.highlight)&&(this.options.highlight=!1),this.options.dropdownFilter&&this.options.dropdownFilter instanceof Object)for(Array.isArray(this.options.dropdownFilter)||(this.options.dropdownFilter=[this.options.dropdownFilter]),i=0,f=this.options.dropdownFilter.length;i<f;++i)this.dropdownFilter[this.options.dropdownFilter[i].value?"static":"dynamic"].push(this.options.dropdownFilter[i]);this.options.dynamicFilter&&!Array.isArray(this.options.dynamicFilter)&&(this.options.dynamicFilter=[this.options.dynamicFilter]);this.options.accent&&(typeof this.options.accent=="object"?this.options.accent.from&&this.options.accent.to&&this.options.accent.from.length===this.options.accent.to.length||this.options.debug&&(t.log({node:this.node.selector,"function":"extendOptions()",message:'Invalid "options.accent", from and to must be defined and same length.'}),t.print()):this.options.accent=u);this.options.groupTemplate&&(this.groupTemplate=this.options.groupTemplate);this.options.resultContainer&&(typeof this.options.resultContainer=="string"&&(this.options.resultContainer=n(this.options.resultContainer)),this.options.resultContainer instanceof n&&this.options.resultContainer[0]?this.resultContainer=this.options.resultContainer:this.options.debug&&(t.log({node:this.node.selector,"function":"extendOptions()",message:'Invalid jQuery selector or jQuery Object for "options.resultContainer".'}),t.print()));this.options.maxItemPerGroup&&this.options.group&&this.options.group.key&&(this.groupBy=this.options.group.key);this.options.callback&&this.options.callback.onClick&&(this.options.callback.onClickBefore=this.options.callback.onClick,delete this.options.callback.onClick);this.options.callback&&this.options.callback.onNavigate&&(this.options.callback.onNavigateBefore=this.options.callback.onNavigate,delete this.options.callback.onNavigate);this.options=n.extend(!0,{},e,this.options)},unifySourceFormat:function(){if(this.groupCount=0,Array.isArray(this.options.source))return this.options.source={group:{data:this.options.source}},this.groupCount=1,!0;typeof this.options.source=="string"&&(this.options.source={group:{ajax:{url:this.options.source}}});this.options.source.ajax&&(this.options.source={group:{ajax:this.options.source.ajax}});(this.options.source.url||this.options.source.data)&&(this.options.source={group:this.options.source});var r,n,i;for(r in this.options.source)if(this.options.source.hasOwnProperty(r)){if(n=this.options.source[r],typeof n=="string"&&(n={ajax:{url:n}}),i=n.url||n.ajax,Array.isArray(i)?(n.ajax=typeof i[0]=="string"?{url:i[0]}:i[0],n.ajax.path=n.ajax.path||i[1]||null,delete n.url):(typeof n.url=="object"?n.ajax=n.url:typeof n.url=="string"&&(n.ajax={url:n.url}),delete n.url),!n.data&&!n.ajax)return this.options.debug&&(t.log({node:this.node.selector,"function":"unifySourceFormat()",arguments:JSON.stringify(this.options.source),message:'Undefined "options.source.'+r+'.[data|ajax]" is Missing - Typeahead dropped'}),t.print()),!1;n.display&&!Array.isArray(n.display)&&(n.display=[n.display]);this.options.source[r]=n;this.groupCount++}return!0},init:function(){this.helper.executeCallback.call(this,this.options.callback.onInit,[this.node]);this.container=this.node.closest("."+this.options.selector.container);this.options.debug&&(t.log({node:this.node.selector,"function":"init()",message:"OK - Typeahead activated on "+this.node.selector}),t.print())},delegateEvents:function(){var t=this,u=["focus"+this.namespace,"input"+this.namespace,"propertychange"+this.namespace,"keydown"+this.namespace,"keyup"+this.namespace,"dynamic"+this.namespace,"generate"+this.namespace],i,r;n("html").on("touchmove",function(){t.hasDragged=!0}).on("touchstart",function(){t.hasDragged=!1});this.node.closest("form").on("submit",function(n){if(t.options.mustSelectItem&&t.helper.isEmpty(t.item)){n.preventDefault();return}return t.options.backdropOnFocus||t.hideLayout(),t.options.callback.onSubmit?t.helper.executeCallback.call(t,t.options.callback.onSubmit,[t.node,this,t.item,n]):void 0}).on("reset",function(){setTimeout(function(){t.node.trigger("input"+t.namespace);t.hideLayout()})});if(i=!1,this.node.attr("placeholder")&&(s||h)){r=!0;this.node.on("focusin focusout",function(){r=!!(!this.value&&this.placeholder)});this.node.on("input",function(n){r&&(n.stopImmediatePropagation(),r=!1)})}this.node.off(this.namespace).on(u.join(" "),function(n,r){switch(n.type){case"generate":t.isGenerated=null;t.generateSource();break;case"focus":if(t.focusOnly){t.focusOnly=!1;break}t.options.backdropOnFocus&&(t.buildBackdropLayout(),t.showLayout());t.options.searchOnFocus&&t.query.length>=t.options.minLength&&(t.isGenerated?t.showLayout():t.isGenerated===null&&t.generateSource());break;case"keydown":n.keyCode&&~[9,13,27,38,39,40].indexOf(n.keyCode)&&(i=!0,t.navigate(n));break;case"keyup":t.isGenerated!==null||t.options.dynamic||t.generateSource();o&&t.node[0].value.replace(/^\s+/,"").toString().length<t.query.length&&t.node.trigger("input"+t.namespace);break;case"propertychange":if(i){i=!1;break}case"input":if(t.rawQuery=t.node[0].value.toString(),t.rawQuery===""&&t.query!==""&&(n.originalEvent=r||{},t.helper.executeCallback.call(t,t.options.callback.onCancel,[t.node,n])),t.query=t.rawQuery.replace(/^\s+/,""),t.options.cancelButton&&t.toggleCancelButton(),t.options.hint&&t.hint.container&&t.hint.container.val()!==""&&t.hint.container.val().indexOf(t.rawQuery)!==0&&t.hint.container.val(""),t.options.dynamic){t.isGenerated=null;t.helper.typeWatch(function(){t.query.length>=t.options.minLength?t.generateSource():t.hideLayout()},t.options.delay);return}case"dynamic":if(!t.isGenerated)break;t.searchResult();t.buildLayout();(t.result.length>0||t.options.emptyTemplate&&t.query!=="")&&t.query.length>=t.options.minLength?t.showLayout():t.hideLayout()}});this.options.generateOnLoad&&this.node.trigger("generate"+this.namespace)},generateSource:function(){var e,o,i,f,u,r,s;if(!this.isGenerated||this.options.dynamic){if(this.generatedGroupCount=0,this.isGenerated=!1,this.options.loadingAnimation&&this.container.addClass("loading"),!this.helper.isEmpty(this.xhr)){for(e in this.xhr)this.xhr.hasOwnProperty(e)&&this.xhr[e].abort();this.xhr={}}o=this;for(i in this.options.source)if(this.options.source.hasOwnProperty(i)){if(u=this.options.source[i],this.options.cache&&(r=window[this.options.cache].getItem("TYPEAHEAD_"+this.node.selector+":"+i),r)){this.options.compression&&(r=LZString.decompressFromUTF16(r));s=!1;try{r=JSON.parse(r+"");r.data&&r.ttl>(new Date).getTime()?(this.populateSource(r.data,i),s=!0,this.options.debug&&(t.log({node:this.node.selector,"function":"generateSource()",message:'Source for group "'+i+'" found in '+this.options.cache}),t.print())):window[this.options.cache].removeItem("TYPEAHEAD_"+this.node.selector+":"+i)}catch(h){}if(s)continue}if(u.data&&!u.ajax){typeof u.data=="function"?(f=u.data.call(this),Array.isArray(f)?o.populateSource(f,i):typeof f.promise=="function"&&function(t){n.when(f).then(function(n){n&&Array.isArray(n)&&o.populateSource(n,t)})}(i)):this.populateSource(n.extend(!0,[],u.data),i);continue}u.ajax&&(this.requests[i]||(this.requests[i]=this.generateRequestObject(i)))}this.handleRequests()}},generateRequestObject:function(n){var u=this,i=this.options.source[n],t={request:{url:i.ajax.url||null,dataType:"json",beforeSend:function(t){u.xhr[n]=t;var r=u.requests[n].callback.beforeSend||i.ajax.beforeSend;typeof r=="function"&&r.apply(null,arguments)}},callback:{beforeSend:null,done:null,fail:null,then:null,always:null},extra:{path:i.ajax.path||null,group:n},validForGroup:[n]},r;if(typeof i.ajax!="function"&&(i.ajax instanceof Object&&(t=this.extendXhrObject(t,i.ajax)),Object.keys(this.options.source).length>1))for(r in this.requests)this.requests.hasOwnProperty(r)&&(this.requests[r].isDuplicated||t.request.url&&t.request.url===this.requests[r].request.url&&(this.requests[r].validForGroup.push(n),t.isDuplicated=!0,delete t.validForGroup));return t},extendXhrObject:function(t,i){return typeof i.callback=="object"&&(t.callback=i.callback,delete i.callback),typeof i.beforeSend=="function"&&(t.callback.beforeSend=i.beforeSend,delete i.beforeSend),t.request=n.extend(!0,t.request,i),t.request.dataType.toLowerCase()!=="jsonp"||t.request.jsonpCallback||(t.request.jsonpCallback="callback_"+t.extra.group),t},handleRequests:function(){var i=this,u=Object.keys(this.requests).length,r;if(this.helper.executeCallback.call(this,this.options.callback.onSendRequest,[this.node,this.query])===!1){this.isGenerated=null;return}for(r in this.requests)this.requests.hasOwnProperty(r)&&(this.requests[r].isDuplicated||function(r,f){var c,e,o,s,h;if(typeof i.options.source[r].ajax=="function"){if(c=i.options.source[r].ajax.call(i,i.query),f=i.extendXhrObject(i.generateRequestObject(r),typeof c=="object"?c:{}),typeof f.request!="object"||!f.request.url){i.options.debug&&(t.log({node:i.node.selector,"function":"handleRequests",message:'Source function must return an object containing ".url" key for group "'+r+'"'}),t.print());i.populateSource([],r);return}i.requests[r]=f}if(o=!1,~f.request.url.indexOf("{{query}}")&&(o||(f=n.extend(!0,{},f),o=!0),f.request.url=f.request.url.replace("{{query}}",encodeURIComponent(i.query))),f.request.data)for(h in f.request.data)if(f.request.data.hasOwnProperty(h)&&~String(f.request.data[h]).indexOf("{{query}}")){o||(f=n.extend(!0,{},f),o=!0);f.request.data[h]=f.request.data[h].replace("{{query}}",i.query);break}n.ajax(f.request).done(function(n,r,u){s=null;for(var o=0,h=f.validForGroup.length;o<h;o++)e=i.requests[f.validForGroup[o]],e.callback.done instanceof Function&&(s=e.callback.done(n,r,u),Array.isArray(s)&&typeof s=="object"||i.options.debug&&(t.log({node:i.node.selector,"function":"Ajax.callback.done()",message:"Invalid returned data has to be an Array"}),t.print()))}).fail(function(n,r,u){for(var o=0,s=f.validForGroup.length;o<s;o++)e=i.requests[f.validForGroup[o]],e.callback.fail instanceof Function&&e.callback.fail(n,r,u);i.options.debug&&(t.log({node:i.node.selector,"function":"Ajax.callback.fail()",arguments:JSON.stringify(f.request),message:r}),console.log(u),t.print())}).always(function(n,t,r){for(var o=0,h=f.validForGroup.length;o<h;o++)e=i.requests[f.validForGroup[o]],e.callback.always instanceof Function&&e.callback.always(n,t,r),i.populateSource(typeof n.promise=="function"&&[]||s||n,e.extra.group,e.extra.path||e.request.path),u-=1,u===0&&i.helper.executeCallback.call(i,i.options.callback.onReceiveRequest,[i.node,i.query])}).then(function(n,t){for(var r=0,u=f.validForGroup.length;r<u;r++)e=i.requests[f.validForGroup[r]],e.callback.then instanceof Function&&e.callback.then(n,t)})}(r,this.requests[r]))},populateSource:function(n,i,r){var k=this,f=this.options.source[i],o=f.ajax&&f.data,p,w,h,l,a,s,b,c,v,u,e,y;for(n=typeof r=="string"?this.helper.namespace(r,n):n,typeof n=="undefined"&&this.options.debug&&(t.log({node:this.node.selector,"function":"populateSource()",arguments:r,message:"Invalid data path."}),t.print()),Array.isArray(n)||(this.options.debug&&(t.log({node:this.node.selector,"function":"populateSource()",arguments:JSON.stringify({group:i}),message:"Invalid data type, must be Array type."}),t.print()),n=[]),o&&(typeof o=="function"&&(o=o()),Array.isArray(o)?n=n.concat(o):this.options.debug&&(t.log({node:this.node.selector,"function":"populateSource()",arguments:JSON.stringify(o),message:"WARNING - this.options.source."+i+".data Must be an Array or a function that returns an Array."}),t.print())),w=f.display?f.display[0]==="compiled"?f.display[1]:f.display[0]:this.options.display[0]==="compiled"?this.options.display[1]:this.options.display[0],u=0,e=n.length;u<e;u++){if(n[u]===null||typeof n[u]=="boolean"){this.options.debug&&(t.log({node:this.node.selector,"function":"populateSource()",message:"WARNING - NULL/BOOLEAN value inside "+i+"! The data was skipped."}),t.print());continue}typeof n[u]=="string"&&(p={},p[w]=n[u],n[u]=p);n[u].group=i}if(!this.options.dynamic&&this.dropdownFilter.dynamic.length)for(a={},u=0,e=n.length;u<e;u++)for(s=0,b=this.dropdownFilter.dynamic.length;s<b;s++)(h=this.dropdownFilter.dynamic[s].key,l=n[u][h],l)&&(this.dropdownFilter.dynamic[s].value||(this.dropdownFilter.dynamic[s].value=[]),a[h]||(a[h]=[]),~a[h].indexOf(l.toLowerCase())||(a[h].push(l.toLowerCase()),this.dropdownFilter.dynamic[s].value.push(l)));if(this.options.correlativeTemplate)if(c=f.template||this.options.template,v="",typeof c=="function"&&(c=c.call(this,"",{})),c){if(Array.isArray(this.options.correlativeTemplate))for(u=0,e=this.options.correlativeTemplate.length;u<e;u++)v+="{{"+this.options.correlativeTemplate[u]+"}} ";else v=c.replace(/<.+?>/g,"");for(u=0,e=n.length;u<e;u++)n[u].compiled=v.replace(/\{\{([\w\-\.]+)(?:\|(\w+))?}}/g,function(t,i){return k.helper.namespace(i,n[u],"get","")}).trim();f.display?~f.display.indexOf("compiled")||f.display.unshift("compiled"):~this.options.display.indexOf("compiled")||this.options.display.unshift("compiled")}else this.options.debug&&(t.log({node:this.node.selector,"function":"populateSource()",arguments:JSON.stringify(i),message:"WARNING - this.options.correlativeTemplate is enabled but no template was found."}),t.print());this.options.callback.onPopulateSource&&(n=this.helper.executeCallback.call(this,this.options.callback.onPopulateSource,[this.node,n,i,r]),this.options.debug&&(n&&Array.isArray(n)||(t.log({node:this.node.selector,"function":"callback.populateSource()",message:'callback.onPopulateSource must return the "data" parameter'}),t.print())));this.tmpSource[i]=n;this.options.cache&&!window[this.options.cache].getItem("TYPEAHEAD_"+this.node.selector+":"+i)&&(this.options.callback.onCacheSave&&(n=this.helper.executeCallback.call(this,this.options.callback.onCacheSave,[this.node,n,i,r]),this.options.debug&&(n&&Array.isArray(n)||(t.log({node:this.node.selector,"function":"callback.populateSource()",message:'callback.onCacheSave must return the "data" parameter'}),t.print()))),y=JSON.stringify({data:n,ttl:(new Date).getTime()+this.options.ttl}),this.options.compression&&(y=LZString.compressToUTF16(y)),window[this.options.cache].setItem("TYPEAHEAD_"+this.node.selector+":"+i,y));this.incrementGeneratedGroup()},incrementGeneratedGroup:function(){var t,n,i;if(this.generatedGroupCount++,this.groupCount===this.generatedGroupCount){for(this.isGenerated=!0,this.xhr={},t=Object.keys(this.options.source),n=0,i=t.length;n<i;n++)this.source[t[n]]=this.tmpSource[t[n]];this.tmpSource={};this.options.dynamic||this.buildDropdownItemLayout("dynamic");this.options.loadingAnimation&&this.container.removeClass("loading");this.node.trigger("dynamic"+this.namespace)}},navigate:function(n){if(this.helper.executeCallback.call(this,this.options.callback.onNavigateBefore,[this.node,this.query,n]),n.keyCode===27){n.preventDefault();this.query.length?(this.resetInput(),this.node.trigger("input"+this.namespace,[n])):(this.node.blur(),this.hideLayout());return}if(this.isGenerated&&this.result.length){var i=this.resultContainer.find("."+this.options.selector.item),r=i.filter(".active"),u=r[0]&&i.index(r)||null,t=null;if(n.keyCode===13){r.length>0&&(n.preventDefault(),r.find("a:first").trigger("click",n));return}if(n.keyCode===39){u?i.eq(u).find("a:first")[0].click():this.options.hint&&this.hint.container.val()!==""&&this.helper.getCaret(this.node[0])>=this.query.length&&i.find('a[data-index="'+this.hintIndex+'"]')[0].click();return}i.length>0&&r.removeClass("active");n.keyCode===38?(n.preventDefault(),r.length>0?u-1>=0&&(t=u-1,i.eq(t).addClass("active")):(t=i.length-1,i.last().addClass("active"))):n.keyCode===40&&(n.preventDefault(),r.length>0?u+1<i.length&&(t=u+1,i.eq(t).addClass("active")):(t=0,i.first().addClass("active")));n.preventInputChange&&~[38,40].indexOf(n.keyCode)&&this.buildHintLayout(t!==null&&t<this.result.length?[this.result[t]]:null);this.options.hint&&this.hint.container&&this.hint.container.css("color",n.preventInputChange?this.hint.css.color:t===null&&this.hint.css.color||this.hint.container.css("background-color")||"fff");this.node.val(t!==null&&!n.preventInputChange?this.result[t][this.result[t].matchedKey]:this.rawQuery);this.helper.executeCallback.call(this,this.options.callback.onNavigateAfter,[this.node,i,t!==null&&i.eq(t).find("a:first")||undefined,t!==null&&this.result[t]||undefined,this.query,n])}},searchResult:function(n){(n||(this.item={}),this.resetLayout(),this.helper.executeCallback.call(this,this.options.callback.onSearch,[this.node,this.query])!==!1)&&(this.query.length>=this.options.minLength&&this.searchResultData(),this.helper.executeCallback.call(this,this.options.callback.onResult,[this.node,this.query,this.result,this.resultCount,this.resultCountPerGroup]),this.isDropdownEvent&&(this.helper.executeCallback.call(this,this.options.callback.onDropdownFilter,[this.node,this.query,this.filters.dropdown,this.result]),this.isDropdownEvent=!1))},searchResultData:function(){var w=this,b=this.groupBy,f=null,r,k,o,l=this.query.toLowerCase(),s=this.options.maxItemPerGroup,st=this.filters.dynamic&&!this.helper.isEmpty(this.filters.dynamic),e,it={},d,a,rt,v,ht=typeof this.options.matcher=="function"&&this.options.matcher,ut,y,g,p,et,c,ot,u,ft,i,nt,tt,n,h;this.options.accent&&(l=this.helper.removeAccent.call(this,l));for(i in this.source)if(this.source.hasOwnProperty(i)&&(!this.filters.dropdown||this.filters.dropdown.key!=="group"||this.filters.dropdown.value===i))for(d=typeof this.options.source[i].filter!="undefined"?this.options.source[i].filter:this.options.filter,rt=typeof this.options.source[i].matcher=="function"&&this.options.source[i].matcher||ht,p=0,et=this.source[i].length;p<et;p++){if(this.result.length>=this.options.maxItem&&!this.options.callback.onResult)break;if((!st||this.dynamicFilter.validate.apply(this,[this.source[i][p]]))&&(r=this.source[i][p],r!==null&&typeof r!="boolean")&&(!this.filters.dropdown||(r[this.filters.dropdown.key]||"").toLowerCase()===(this.filters.dropdown.value||"").toLowerCase())){if(f=b==="group"?i:r[b],f&&!this.result[f]&&(this.result[f]=[],this.resultCountPerGroup[f]=0),s&&b==="group"&&this.result[f].length>=s&&!this.options.callback.onResult)break;for(u=this.options.source[i].display||this.options.display,n=0,h=u.length;n<h;n++){if(e=/\./.test(u[n])?this.helper.namespace(u[n],r):r[u[n]],typeof e=="undefined"||e===""){this.options.debug&&(it[n]={display:u[n],data:r});continue}if(e=this.helper.cleanStringFromScript(e),typeof d=="function"){if(a=d.call(this,r,e),a===undefined)break;if(!a)continue;typeof a=="object"&&(r=a)}if(~[undefined,!0].indexOf(d)){if(o=e,o=o.toString().toLowerCase(),this.options.accent&&(o=this.helper.removeAccent.call(this,o)),k=o.indexOf(l),this.options.correlativeTemplate&&u[n]==="compiled"&&k<0&&/\s/.test(l))for(ut=!0,y=l.split(" "),g=o,c=0,ot=y.length;c<ot;c++)if(y[c]!==""){if(!~g.indexOf(y[c])){ut=!1;break}g=g.replace(y[c],"")}if(k<0&&!ut)continue;if(this.options.offset&&k!==0)continue;if(rt){if(v=rt.call(this,r,e),v===undefined)break;if(!v)continue;typeof v=="object"&&(r=v)}}if(this.resultCount++,this.resultCountPerGroup[f]++,this.resultItemCount<this.options.maxItem){if(s&&this.result[f].length>=s)break;r.matchedKey=u[n];this.result[f].push(r);this.resultItemCount++}break}if(!this.options.callback.onResult){if(this.resultItemCount>=this.options.maxItem)break;if(s&&this.result[f].length>=s&&b==="group")break}}}if(this.options.debug&&(this.helper.isEmpty(it)||(t.log({node:this.node.selector,"function":"searchResult()",arguments:JSON.stringify(it),message:"Missing keys for display, make sure options.display is set properly."}),t.print())),this.options.order){u=[];for(i in this.result)if(this.result.hasOwnProperty(i)){for(n=0,h=this.result[i].length;n<h;n++)ft=this.options.source[this.result[i][n].group].display||this.options.display,~u.indexOf(ft[0])||u.push(ft[0]);this.result[i].sort(w.helper.sort(u,w.options.order==="asc",function(n){return n.toString().toUpperCase()}))}}for(nt=[],tt=typeof this.options.groupOrder=="function"?this.options.groupOrder.apply(this,[this.node,this.query,this.result,this.resultCount,this.resultCountPerGroup]):Array.isArray(this.options.groupOrder)?this.options.groupOrder:typeof this.options.groupOrder=="string"&&~["asc","desc"].indexOf(this.options.groupOrder)?Object.keys(this.result).sort(w.helper.sort([],w.options.groupOrder==="asc",function(n){return n.toString().toUpperCase()})):Object.keys(this.result),this.groups=tt,n=0,h=tt.length;n<h;n++)nt=nt.concat(this.result[tt[n]]||[]);this.result=nt},buildLayout:function(){if(this.buildHtmlLayout(),this.buildBackdropLayout(),this.buildHintLayout(),this.options.callback.onLayoutBuiltBefore){var i=this.helper.executeCallback.call(this,this.options.callback.onLayoutBuiltBefore,[this.node,this.query,this.result,this.resultHtml]);i instanceof n?this.resultHtml=i:this.options.debug&&(t.log({node:this.node.selector,"function":"callback.onLayoutBuiltBefore()",message:"Invalid returned value - You must return resultHtmlList jQuery Object"}),t.print())}this.resultHtml&&this.resultContainer.html(this.resultHtml);this.options.callback.onLayoutBuiltAfter&&this.helper.executeCallback.call(this,this.options.callback.onLayoutBuiltAfter,[this.node,this.query,this.result])},buildHtmlLayout:function(){var l,o,u,p,i,f,w,s,a,b,c,v,h,k,e,y;if(this.options.resultContainer!==!1){if(this.resultContainer||(this.resultContainer=n("<div/>",{"class":this.options.selector.result}),this.container.append(this.resultContainer)),!this.result.length)if(this.options.emptyTemplate&&this.query!=="")l=typeof this.options.emptyTemplate=="function"?this.options.emptyTemplate.call(this,this.query):this.options.emptyTemplate.replace(/\{\{query}}/gi,this.helper.cleanStringFromScript(this.query));else return;o=this.query.toLowerCase();this.options.accent&&(o=this.helper.removeAccent.call(this,o));var t=this,r=this.groupTemplate||"<ul><\/ul>",d=!1;for(this.groupTemplate?r=n(r.replace(/<([^>]+)>\{\{(.+?)}}<\/[^>]+>/g,function(n,i,r){var f="",e=r==="group"?t.groups:[r],u,o;if(!t.result.length)return d===!0?"":(d=!0,"<"+i+' class="'+t.options.selector.empty+'"><a href="javascript:;">'+l+"<\/a><\/"+i+">");for(u=0,o=e.length;u<o;++u)f+="<"+i+' data-group-template="'+e[u]+'"><ul><\/ul><\/'+i+">";return f})):(r=n(r),this.result.length||r.append(l instanceof n?l:'<li class="'+t.options.selector.empty+'"><a href="javascript:;">'+l+"<\/a><\/li>")),r.addClass(this.options.selector.list+(this.helper.isEmpty(this.result)?" empty":"")),h=this.groupTemplate&&this.result.length&&t.groups||[],e=0,y=this.result.length;e<y;++e)i=this.result[e],u=i.group,f=this.options.source[i.group].href||this.options.href,b=[],c=this.options.source[i.group].display||this.options.display,this.options.group&&(u=i[this.options.group.key],this.options.group.template&&(typeof this.options.group.template=="function"?p=this.options.group.template(i):typeof this.options.template=="string"&&(p=this.options.group.template.replace(/\{\{([\w\-\.]+)}}/gi,function(n,r){return t.helper.namespace(r,i,"get","")}))),r.find('[data-search-group="'+u+'"]')[0]||(this.groupTemplate?r.find('[data-group-template="'+u+'"] ul'):r).append(n("<li/>",{"class":t.options.selector.group,html:n("<a/>",{href:"javascript:;",html:p||u,tabindex:-1}),"data-search-group":u}))),this.groupTemplate&&h.length&&(k=h.indexOf(u||i.group),~k&&h.splice(k,1)),w=n("<li/>",{"class":t.options.selector.item+" "+t.options.selector.group+"-"+this.helper.slugify.call(this,u),html:n("<a/>",{href:function(){return f&&(typeof f=="string"?f=f.replace(/\{\{([^\|}]+)(?:\|([^}]+))*}}/gi,function(n,r,u){var f=t.helper.namespace(r,i,"get","");return u=u&&u.split("|")||[],~u.indexOf("slugify")&&(f=t.helper.slugify.call(t,f)),f}):typeof f=="function"&&(f=f(i)),i.href=f),f||"javascript:;"}(),"data-group":u,"data-index":e,html:function(){if(s=i.group&&t.options.source[i.group].template||t.options.template,s)typeof s=="function"&&(s=s.call(t,t.query,i)),a=s.replace(/\{\{([^\|}]+)(?:\|([^}]+))*}}/gi,function(n,r,u){var f=t.helper.cleanStringFromScript(String(t.helper.namespace(r,i,"get","")));return u=u&&u.split("|")||[],~u.indexOf("slugify")&&(f=t.helper.slugify.call(t,f)),~u.indexOf("raw")||t.options.highlight===!0&&o&&~c.indexOf(r)&&(f=t.helper.highlight.call(t,f,o.split(" "),t.options.accent)),f});else{for(var r=0,u=c.length;r<u;r++)(v=/\./.test(c[r])?t.helper.namespace(c[r],i):i[c[r]],typeof v!="undefined"&&v!=="")&&b.push(v);a='<span class="'+t.options.selector.display+'">'+t.helper.cleanStringFromScript(String(b.join(" ")))+"<\/span>"}(t.options.highlight===!0&&o&&!s||t.options.highlight==="any")&&(a=t.helper.highlight.call(t,a,o.split(" "),t.options.accent));n(this).append(a)}})}),function(i,r,u){u.on("click",function(i,u){if(u&&typeof u=="object"&&(i.originalEvent=u),t.options.mustSelectItem&&t.helper.isEmpty(r)){i.preventDefault();return}(t.item=r,t.helper.executeCallback.call(t,t.options.callback.onClickBefore,[t.node,n(this),r,i])!==!1)&&(i.originalEvent&&i.originalEvent.defaultPrevented||i.isDefaultPrevented()||(t.query=t.rawQuery=r[r.matchedKey].toString(),t.focusOnly=!0,t.node.val(t.query).focus(),t.searchResult(!0),t.buildLayout(),t.hideLayout(),t.helper.executeCallback.call(t,t.options.callback.onClickAfter,[t.node,n(this),r,i])))});u.on("mouseenter",function(i){t.helper.executeCallback.call(t,t.options.callback.onMouseEnter,[t.node,n(this),r,i])});u.on("mouseleave",function(i){t.helper.executeCallback.call(t,t.options.callback.onMouseLeave,[t.node,n(this),r,i])})}(e,i,w),(this.groupTemplate?r.find('[data-group-template="'+u+'"] ul'):r).append(w);if(this.result.length&&h.length)for(e=0,y=h.length;e<y;++e)r.find('[data-group-template="'+h[e]+'"]').remove();this.resultHtml=r}},buildBackdropLayout:function(){this.options.backdrop&&(this.backdrop.container||(this.backdrop.css=n.extend({opacity:.6,filter:"alpha(opacity=60)",position:"fixed",top:0,right:0,bottom:0,left:0,"z-index":1040,"background-color":"#000"},this.options.backdrop),this.backdrop.container=n("<div/>",{"class":this.options.selector.backdrop,css:this.backdrop.css}).insertAfter(this.container)),this.container.addClass("backdrop").css({"z-index":this.backdrop.css["z-index"]+1,position:"relative"}))},buildHintLayout:function(t){var f,s,e,i,h,r,c;if(this.options.hint){if(this.node[0].scrollWidth>Math.ceil(this.node.innerWidth())){this.hint.container&&this.hint.container.val("");return}var l=this,o="",t=t||this.result,u=this.query.toLowerCase();if(this.options.accent&&(u=this.helper.removeAccent.call(this,u)),this.hintIndex=null,this.query.length>=this.options.minLength){if(this.hint.container||(this.hint.css=n.extend({"border-color":"transparent",position:"absolute",top:0,display:"inline","z-index":-1,float:"none",color:"silver","box-shadow":"none",cursor:"default","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"},this.options.hint),this.hint.container=n("<input/>",{type:this.node.attr("type"),"class":this.node.attr("class"),readonly:!0,unselectable:"on","aria-hidden":"true",tabindex:-1,click:function(){l.node.focus()}}).addClass(this.options.selector.hint).css(this.hint.css).insertAfter(this.node),this.node.parent().css({position:"relative"})),this.hint.container.css("color",this.hint.css.color),u)for(i=0,h=t.length;i<h;i++){for(s=t[i].group,f=this.options.source[s].display||this.options.display,r=0,c=f.length;r<c;r++)if(e=String(t[i][f[r]]).toLowerCase(),this.options.accent&&(e=this.helper.removeAccent.call(this,e)),e.indexOf(u)===0){o=String(t[i][f[r]]);this.hintIndex=i;break}if(this.hintIndex!==null)break}this.hint.container.val(o.length>0&&this.rawQuery+o.substring(this.query.length)||"")}}},buildDropdownLayout:function(){if(this.options.dropdownFilter){var t=this;n("<span/>",{"class":this.options.selector.filter,html:function(){n(this).append(n("<button/>",{type:"button","class":t.options.selector.filterButton,style:"display: none;",click:function(i){i.stopPropagation();t.container.toggleClass("filter");var r=t.namespace+"-dropdown-filter";if(n("html").off(r),t.container.hasClass("filter"))n("html").on("click"+r+" touchend"+r,function(i){n(i.target).closest("."+t.options.selector.filter)[0]||t.hasDragged||t.container.removeClass("filter")})}}));n(this).append(n("<ul/>",{"class":t.options.selector.dropdown}))}}).insertAfter(t.container.find("."+t.options.selector.query))}},buildDropdownItemLayout:function(t){function l(n){n.value==="*"?delete this.filters.dropdown:this.filters.dropdown=n;this.container.removeClass("filter").find("."+this.options.selector.filterButton).html(n.template);this.isDropdownEvent=!0;this.node.trigger("dynamic"+this.namespace);this.node.focus()}var u=this,e,h=typeof this.options.dropdownFilter=="string"&&this.options.dropdownFilter||"All",c=this.container.find("."+this.options.selector.dropdown),i,f,o,r,s;for((t==="static"&&this.options.dropdownFilter===!0||typeof this.options.dropdownFilter=="string")&&this.dropdownFilter.static.push({key:"group",template:"{{group}}",all:h,value:Object.keys(this.options.source)}),f=0,o=this.dropdownFilter[t].length;f<o;f++)for(i=this.dropdownFilter[t][f],Array.isArray(i.value)||(i.value=[i.value]),i.all&&(this.dropdownFilterAll=i.all),r=0,s=i.value.length;r<=s;r++){if(r===s&&f!==o-1)continue;else if(r===s&&f===o-1&&t==="static"&&this.dropdownFilter.dynamic.length)continue;e=this.dropdownFilterAll||h;i.value[r]?e=i.template?i.template.replace(new RegExp("{{"+i.key+"}}","gi"),i.value[r]):i.value[r]:this.container.find("."+u.options.selector.filterButton).html(e),function(t,i,r){c.append(n("<li/>",{"class":u.options.selector.dropdownItem+" "+u.helper.slugify.call(u,i.key+"-"+(i.value[t]||h)),html:n("<a/>",{href:"javascript:;",html:r,click:function(n){n.preventDefault();l.call(u,{key:i.key,value:i.value[t]||"*",template:r})}})}))}(r,i,e)}this.dropdownFilter[t].length&&this.container.find("."+u.options.selector.filterButton).removeAttr("style")},dynamicFilter:{isEnabled:!1,init:function(){this.options.dynamicFilter&&(this.dynamicFilter.bind.call(this),this.dynamicFilter.isEnabled=!0)},validate:function(n){var u,i=null,r=null,f;for(var t in this.filters.dynamic)if(this.filters.dynamic.hasOwnProperty(t)&&(f=~t.indexOf(".")?this.helper.namespace(t,n,"get"):n[t],this.filters.dynamic[t].modifier!=="|"||i||(i=f==this.filters.dynamic[t].value||!1),this.filters.dynamic[t].modifier==="&"))if(f==this.filters.dynamic[t].value)r=!0;else{r=!1;break}return u=i,r!==null&&(u=r,r===!0&&i!==null&&(u=i)),!!u},set:function(n,t){var i=n.match(/^([|&])?(.+)/);t?this.filters.dynamic[i[2]]={modifier:i[1]||"|",value:t}:delete this.filters.dynamic[i[2]];this.dynamicFilter.isEnabled&&(this.searchResult(),this.buildLayout())},bind:function(){for(var r=this,i,u=0,f=this.options.dynamicFilter.length;u<f;u++){if(i=this.options.dynamicFilter[u],typeof i.selector=="string"&&(i.selector=n(i.selector)),!(i.selector instanceof n)||!i.selector[0]||!i.key){this.options.debug&&(t.log({node:this.node.selector,"function":"buildDynamicLayout()",message:'Invalid jQuery selector or jQuery Object for "filter.selector" or missing filter.key'}),t.print());continue}(function(n){n.selector.off(r.namespace).on("change"+r.namespace,function(){r.dynamicFilter.set.apply(r,[n.key,r.dynamicFilter.getValue(this)])}).trigger("change"+r.namespace)})(i)}},getValue:function(n){var t;return n.tagName==="SELECT"?t=n.value:n.tagName==="INPUT"&&(n.type==="checkbox"?t=n.checked&&n.getAttribute("value")||n.checked||null:n.type==="radio"&&n.checked&&(t=n.value)),t}},showLayout:function(){if(!this.container.hasClass("result")&&(this.result.length||this.options.emptyTemplate||this.options.backdropOnFocus)){var t=this;n("html").off(this.namespace).on("click"+this.namespace+" touchend"+this.namespace,function(i){n(i.target).closest(t.container)[0]||t.hasDragged||t.hideLayout()});this.container.addClass([this.result.length||this.options.emptyTemplate&&this.query.length>=this.options.minLength?"result ":"",this.options.hint&&this.query.length>=this.options.minLength?"hint":"",this.options.backdrop||this.options.backdropOnFocus?"backdrop":""].join(" "));this.helper.executeCallback.call(this,this.options.callback.onShowLayout,[this.node,this.query])}},hideLayout:function(){(this.container.hasClass("result")||this.container.hasClass("backdrop"))&&((this.container.removeClass("result hint filter"+(this.options.backdropOnFocus&&n(this.node).is(":focus")?"":" backdrop")),this.options.backdropOnFocus&&this.container.hasClass("backdrop"))||(n("html").off(this.namespace),this.helper.executeCallback.call(this,this.options.callback.onHideLayout,[this.node,this.query])))},resetLayout:function(){this.result={};this.resultCount=0;this.resultCountPerGroup={};this.resultItemCount=0;this.resultHtml=null;this.options.hint&&this.hint.container&&this.hint.container.val("")},resetInput:function(){this.node.val("");this.item=null;this.query="";this.rawQuery=""},buildCancelButtonLayout:function(){if(this.options.cancelButton){var t=this;n("<span/>",{"class":this.options.selector.cancelButton,mousedown:function(n){n.stopImmediatePropagation();n.preventDefault();t.resetInput();t.node.trigger("input"+t.namespace,[n])}}).insertBefore(this.node)}},toggleCancelButton:function(){this.container.toggleClass("cancel",!!this.query.length)},__construct:function(){(this.extendOptions(),this.unifySourceFormat())&&(this.dynamicFilter.init.apply(this),this.init(),this.delegateEvents(),this.buildCancelButtonLayout(),this.buildDropdownLayout(),this.buildDropdownItemLayout("static"),this.helper.executeCallback.call(this,this.options.callback.onReady,[this.node]))},helper:{isEmpty:function(n){for(var t in n)if(n.hasOwnProperty(t))return!1;return!0},removeAccent:function(n){if(typeof n=="string"){var t=u;return typeof this.options.accent=="object"&&(t=this.options.accent),n.toLowerCase().replace(new RegExp("["+t.from+"]","g"),function(n){return t.to[t.from.indexOf(n)]})}},slugify:function(n){return n=String(n),n!==""&&(n=this.helper.removeAccent.call(this,n),n=n.replace(/[^-a-z0-9]+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")),n},sort:function(n,t,i){var r=function(t){for(var r=0,u=n.length;r<u;r++)if(typeof t[n[r]]!="undefined")return i(t[n[r]]);return t};return t=[-1,1][+!!t],function(n,i){return n=r(n),i=r(i),t*((n>i)-(i>n))}},replaceAt:function(n,t,i,r){return n.substring(0,t)+r+n.substring(t+i)},highlight:function(n,t,i){var f,u,r;for(n=String(n),f=i&&this.helper.removeAccent.call(this,n)||n,u=[],Array.isArray(t)||(t=[t]),t.sort(function(n,t){return t.length-n.length}),r=t.length-1;r>=0;r--){if(t[r].trim()===""){t.splice(r,1);continue}t[r]=t[r].replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}for(f.replace(new RegExp("(?:"+t.join("|")+")(?!([^<]+)?>)","gi"),function(n,t,i){u.push({offset:i,length:n.length})}),r=u.length-1;r>=0;r--)n=this.helper.replaceAt(n,u[r].offset,u[r].length,"<strong>"+n.substr(u[r].offset,u[r].length)+"<\/strong>");return n},getCaret:function(n){var i,t,r;return n.selectionStart?n.selectionStart:document.selection?(n.focus(),i=document.selection.createRange(),i===null)?0:(t=n.createTextRange(),r=t.duplicate(),t.moveToBookmark(i.getBookmark()),r.setEndPoint("EndToStart",t),r.text.length):0},cleanStringFromScript:function(n){return typeof n=="string"&&n.replace(/<\/?(?:script|iframe)\b[^>]*>/gm,"")||n},executeCallback:function(n,i){if(n){var r;if(typeof n=="function")r=n;else if((typeof n=="string"||Array.isArray(n))&&(typeof n=="string"&&(n=[n,[]]),r=this.helper.namespace(n[0],window),typeof r!="function")){this.options.debug&&(t.log({node:this.selector,"function":"executeCallback()",arguments:JSON.stringify(n),message:'WARNING - Invalid callback function"'}),t.print());return}return r.apply(this,(n[1]||[]).concat(i?i:[]))}},namespace:function(n,i,r,u){var o,s;if(typeof n!="string"||n==="")return this.options.debug&&(t.log({node:_node.selector,"function":"namespace()",arguments:n,message:'ERROR - Missing namespaceString"'}),t.print()),!1;var h=n.split("."),f=i||window,r=r||"get",c=u||{},e="";for(o=0,s=h.length;o<s;o++){if(e=h[o],typeof f[e]=="undefined"){if(~["get","delete"].indexOf(r))return typeof u!="undefined"?u:undefined;f[e]={}}if(~["set","create","delete"].indexOf(r)&&o===s-1)if(r==="set"||r==="create")f[e]=c;else return delete f[e],!0;f=f[e]}return f},typeWatch:function(){var n=0;return function(t,i){clearTimeout(n);n=setTimeout(t,i)}}()}},n.fn.typeahead=n.typeahead=function(n){return f.typeahead(this,n)},f={typeahead:function(r,u){if(!u||!u.source||typeof u.source!="object"){t.log({node:r.selector||u&&u.input,"function":"$.typeahead()",arguments:JSON.stringify(u&&u.source||""),message:'Undefined "options" or "options.source" or invalid source type - Typeahead dropped'});t.print();return}if(typeof r=="function"){if(!u.input){t.log({node:r.selector,"function":"$.typeahead()",message:'Undefined "options.input" - Typeahead dropped'});t.print();return}r=n(u.input)}if(!r.length||r[0].nodeName!=="INPUT"){t.log({node:r.selector,"function":"$.typeahead()",arguments:JSON.stringify(u.input),message:"Unable to find jQuery input element - Typeahead dropped"});t.print();return}return u.input&&!r.selector&&(r.selector=u.input),window.Typeahead[u.input||r.selector]=new i(r,u)}},t={table:{},log:function(t){t.message&&typeof t.message=="string"&&(this.table[t.message]=n.extend({node:"","function":"",arguments:""},t))},print:function(){!i.prototype.helper.isEmpty(this.table)&&console&&console.table&&((console.group!==undefined||console.table!==undefined)&&(console.groupCollapsed("--- jQuery Typeahead Debug ---"),console.table(this.table),console.groupEnd()),this.table={})}},t.log({message:"WARNING - You are using the DEBUG version. Use /dist/jquery.typeahead.min.js in production."}),t.print(),window.console=window.console||{log:function(){}},Array.isArray||(Array.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"}),"trim"in String.prototype||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),"indexOf"in Array.prototype||(Array.prototype.indexOf=function(n,t){t===undefined&&(t=0);t<0&&(t+=this.length);t<0&&(t=0);for(var i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1}),Object.keys||(Object.keys=function(n){var t=[];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.push(i);return t}),i}),function(){"use strict";function t(r){return typeof this=="undefined"||Object.getPrototypeOf(this)!==t.prototype?new t(r):(n=this,n.version="3.3.2",n.tools=new i,n.isSupported()?(n.tools.extend(n.defaults,r||{}),n.defaults.container=e(n.defaults),n.store={elements:{},containers:[]},n.sequences={},n.history=[],n.uid=0,n.initialized=!1):typeof console!="undefined"&&console!==null&&console.log("ScrollReveal is not supported in this browser."),n)}function e(t){if(t&&t.container){if(typeof t.container=="string")return window.document.documentElement.querySelector(t.container);if(n.tools.isNode(t.container))return t.container;console.log('ScrollReveal: invalid container "'+t.container+'" provided.');console.log("ScrollReveal: falling back to default container.")}return n.defaults.container}function y(t,i){return typeof t=="string"?Array.prototype.slice.call(i.querySelectorAll(t)):n.tools.isNode(t)?[t]:n.tools.isNodeList(t)?Array.prototype.slice.call(t):[]}function o(){return++n.uid}function p(t,i,r){i.container&&(i.container=r);t.config=t.config?n.tools.extendClone(t.config,i):n.tools.extendClone(n.defaults,i);t.config.axis=t.config.origin==="top"||t.config.origin==="bottom"?"Y":"X"}function w(n){var t=window.getComputedStyle(n.domEl);n.styles||(n.styles={transition:{},transform:{},computed:{}},n.styles.inline=n.domEl.getAttribute("style")||"",n.styles.inline+="; visibility: visible; ",n.styles.computed.opacity=t.opacity,n.styles.computed.transition=t.transition&&t.transition!=="all 0s ease 0s"?t.transition+", ":"");n.styles.transition.instant=s(n,0);n.styles.transition.delayed=s(n,n.config.delay);n.styles.transform.initial=" -webkit-transform:";n.styles.transform.target=" -webkit-transform:";h(n);n.styles.transform.initial+="transform:";n.styles.transform.target+="transform:";h(n)}function s(n,t){var i=n.config;return"-webkit-transition: "+n.styles.computed.transition+"-webkit-transform "+i.duration/1e3+"s "+i.easing+" "+t/1e3+"s, opacity "+i.duration/1e3+"s "+i.easing+" "+t/1e3+"s; transition: "+n.styles.computed.transition+"transform "+i.duration/1e3+"s "+i.easing+" "+t/1e3+"s, opacity "+i.duration/1e3+"s "+i.easing+" "+t/1e3+"s; "}function h(n){var t=n.config,r,i=n.styles.transform;r=t.origin==="top"||t.origin==="left"?/^-/.test(t.distance)?t.distance.substr(1):"-"+t.distance:t.distance;parseInt(t.distance)&&(i.initial+=" translate"+t.axis+"("+r+")",i.target+=" translate"+t.axis+"(0)");t.scale&&(i.initial+=" scale("+t.scale+")",i.target+=" scale(1)");t.rotate.x&&(i.initial+=" rotateX("+t.rotate.x+"deg)",i.target+=" rotateX(0)");t.rotate.y&&(i.initial+=" rotateY("+t.rotate.y+"deg)",i.target+=" rotateY(0)");t.rotate.z&&(i.initial+=" rotateZ("+t.rotate.z+"deg)",i.target+=" rotateZ(0)");i.initial+="; opacity: "+t.opacity+";";i.target+="; opacity: "+n.styles.computed.opacity+";"}function b(t){var i=t.config.container;i&&n.store.containers.indexOf(i)===-1&&n.store.containers.push(t.config.container);n.store.elements[t.id]=t}function k(t,i,r){var u={target:t,config:i,interval:r};n.history.push(u)}function c(){if(n.isSupported()){l();for(var t=0;t<n.store.containers.length;t++)n.store.containers[t].addEventListener("scroll",r),n.store.containers[t].addEventListener("resize",r);n.initialized||(window.addEventListener("scroll",r),window.addEventListener("resize",r),n.initialized=!0)}return n}function r(){f(l)}function d(){var t,r,f,i;n.tools.forOwn(n.sequences,function(e){i=n.sequences[e];t=!1;for(var o=0;o<i.elemIds.length;o++)f=i.elemIds[o],r=n.store.elements[f],u(r)&&!t&&(t=!0);i.active=t})}function l(){var i,t;d();n.tools.forOwn(n.store.elements,function(r){t=n.store.elements[r];i=tt(t);nt(t)?(t.config.beforeReveal(t.domEl),i?t.domEl.setAttribute("style",t.styles.inline+t.styles.transform.target+t.styles.transition.delayed):t.domEl.setAttribute("style",t.styles.inline+t.styles.transform.target+t.styles.transition.instant),a("reveal",t,i),t.revealing=!0,t.seen=!0,t.sequence&&g(t,i)):it(t)&&(t.config.beforeReset(t.domEl),t.domEl.setAttribute("style",t.styles.inline+t.styles.transform.initial+t.styles.transition.instant),a("reset",t),t.revealing=!1)})}function g(t,i){var f=0,e=0,u=n.sequences[t.sequence.id];u.blocked=!0;i&&t.config.useDelay==="onload"&&(e=t.config.delay);t.sequence.timer&&(f=Math.abs(t.sequence.timer.started-new Date),window.clearTimeout(t.sequence.timer));t.sequence.timer={started:new Date};t.sequence.timer.clock=window.setTimeout(function(){u.blocked=!1;t.sequence.timer=null;r()},Math.abs(u.interval)+e-f)}function a(n,t,i){var f=0,r=0,u="after";switch(n){case"reveal":r=t.config.duration;i&&(r+=t.config.delay);u+="Reveal";break;case"reset":r=t.config.duration;u+="Reset"}t.timer&&(f=Math.abs(t.timer.started-new Date),window.clearTimeout(t.timer.clock));t.timer={started:new Date};t.timer.clock=window.setTimeout(function(){t.config[u](t.domEl);t.timer=null},r-f)}function nt(t){if(t.sequence){var i=n.sequences[t.sequence.id];return i.active&&!i.blocked&&!t.revealing&&!t.disabled}return u(t)&&!t.revealing&&!t.disabled}function tt(t){var i=t.config.useDelay;return i==="always"||i==="onload"&&!n.initialized||i==="once"&&!t.seen}function it(t){if(t.sequence){var i=n.sequences[t.sequence.id];return!i.active&&t.config.reset&&t.revealing&&!t.disabled}return!u(t)&&t.config.reset&&t.revealing&&!t.disabled}function rt(n){return{width:n.clientWidth,height:n.clientHeight}}function ut(n){if(n&&n!==window.document.documentElement){var t=v(n);return{x:n.scrollLeft+t.left,y:n.scrollTop+t.top}}return{x:window.pageXOffset,y:window.pageYOffset}}function v(n){var t=0,i=0,r=n.offsetHeight,u=n.offsetWidth;do isNaN(n.offsetTop)||(t+=n.offsetTop),isNaN(n.offsetLeft)||(i+=n.offsetLeft),n=n.offsetParent;while(n);return{top:t,left:i,height:r,width:u}}function u(n){function l(){var t=o+u*r,l=s+f*r,a=h-u*r,v=c-f*r,y=i.y+n.config.viewOffset.top,p=i.x+n.config.viewOffset.left,w=i.y-n.config.viewOffset.bottom+e.height,b=i.x-n.config.viewOffset.right+e.width;return t<w&&a>y&&l>p&&v<b}function a(){return window.getComputedStyle(n.domEl).position==="fixed"}var t=v(n.domEl),e=rt(n.config.container),i=ut(n.config.container),r=n.config.viewFactor,u=t.height,f=t.width,o=t.top,s=t.left,h=o+u,c=s+f;return l()||a()}function i(){}var n,f;t.prototype.defaults={origin:"bottom",distance:"20px",duration:500,delay:0,rotate:{x:0,y:0,z:0},opacity:0,scale:.9,easing:"cubic-bezier(0.6, 0.2, 0.1, 1)",container:window.document.documentElement,mobile:!0,reset:!1,useDelay:"always",viewFactor:.2,viewOffset:{top:0,right:0,bottom:0,left:0},beforeReveal:function(){},beforeReset:function(){},afterReveal:function(){},afterReset:function(){}};t.prototype.isSupported=function(){var n=document.documentElement.style;return"WebkitTransition"in n&&"WebkitTransform"in n||"transition"in n&&"transform"in n};t.prototype.reveal=function(t,i,r,u){var a,s,f,v,h,d,l;if(i!==undefined&&typeof i=="number"?(r=i,i={}):(i===undefined||i===null)&&(i={}),a=e(i),s=y(t,a),!s.length)return console.log('ScrollReveal: reveal on "'+t+'" failed, no elements found.'),n;for(r&&typeof r=="number"&&(d=o(),h=n.sequences[d]={id:d,interval:r,elemIds:[],active:!1}),l=0;l<s.length;l++)v=s[l].getAttribute("data-sr-id"),v?f=n.store.elements[v]:(f={id:o(),domEl:s[l],seen:!1,revealing:!1},f.domEl.setAttribute("data-sr-id",f.id)),h&&(f.sequence={id:h.id,index:h.elemIds.length},h.elemIds.push(f.id)),p(f,i,a),w(f),b(f),(!n.tools.isMobile()||f.config.mobile)&&n.isSupported()?f.revealing||f.domEl.setAttribute("style",f.styles.inline+f.styles.transform.initial):(f.domEl.setAttribute("style",f.styles.inline),f.disabled=!0);return!u&&n.isSupported()&&(k(t,i,r),n.initTimeout&&window.clearTimeout(n.initTimeout),n.initTimeout=window.setTimeout(c,0)),n};t.prototype.sync=function(){var t,i;if(n.history.length&&n.isSupported()){for(t=0;t<n.history.length;t++)i=n.history[t],n.reveal(i.target,i.config,i.interval,!0);c()}else console.log("ScrollReveal: sync failed, no reveals found.");return n};i.prototype.isObject=function(n){return n!==null&&typeof n=="object"&&n.constructor===Object};i.prototype.isNode=function(n){return typeof Node=="object"?n instanceof window.Node:n&&typeof n=="object"&&typeof n.nodeType=="number"&&typeof n.nodeName=="string"};i.prototype.isNodeList=function(n){var t=Object.prototype.toString.call(n);return typeof NodeList=="object"?n instanceof window.NodeList:n&&typeof n=="object"&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(t)&&typeof n.length=="number"&&(n.length===0||this.isNode(n[0]))};i.prototype.forOwn=function(n,t){if(this.isObject(n))for(var i in n)n.hasOwnProperty(i)&&t(i);else throw new TypeError('Expected "object", but received "'+typeof n+'".');};i.prototype.extend=function(n,t){return this.forOwn(t,function(i){this.isObject(t[i])?(n[i]&&this.isObject(n[i])||(n[i]={}),this.extend(n[i],t[i])):n[i]=t[i]}.bind(this)),n};i.prototype.extendClone=function(n,t){return this.extend(this.extend({},n),t)};i.prototype.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)};f=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(n){window.setTimeout(n,1e3/60)};typeof define=="function"&&typeof define.amd=="object"&&define.amd?define(function(){return t}):typeof module!="undefined"&&module.exports?module.exports=t:window.ScrollReveal=t}();var sidenavTimer=null,sidenavState=null;$(function(){function u(){if(t==="lg"){var u=$(window).scrollTop();u>=r?(i=n.width(),n.width(i),n.addClass("fixed"),n.find(".sidebar-fixed-hidden").show("slow"),n.find(".sidebar-fixed-displayed").hide("slow")):(n.removeClass("fixed"),$(document).height()>$(window).height()&&(n.find(".sidebar-fixed-hidden").hide("slow"),n.find(".sidebar-fixed-displayed").show("slow")))}}function f(){var i=["xs","sm","md","lg"],t=$("<div>"),n,r;for(t.appendTo($("body")),n=i.length-1;n>=0;n--)if(r=i[n],t.addClass("hidden-"+r+"-up"),t.is(":hidden"))return t.remove(),i[n]}var t,n,r,i;$(document).keyup(function(n){n.keyCode==27&&(closeSidenav(),$(".typeahead").typeahead("setQuery",""))});$("#global-sidenav").on("mouseenter",function(){openSidenav(225)});$("#global-sidenav").on("mouseleave",function(){closeSidenav()});$("#sidenav-toggler").click(function(n){return n.preventDefault(),toggleSidenav(0),!1});$(".darken").click(function(){closeSidenav()});$(".toggle").on("click",function(n){n.preventDefault();var t=$(this).attr("href"),i=$(this).data("group"),r=$(t).is(":visible");return r?$(t).hide():($("."+i).hide(),$(t).show()),!1});t=f();console.log(t);window.sr=ScrollReveal();sr.reveal(".reveal",{distance:"5px",origin:"right",duration:500,delay:0});sr.reveal(".reveal-no-mobile",{distance:"5px",origin:"right",duration:500,delay:0,mobile:!1});sr.reveal(".reveal-slow",{distance:"5px",origin:"right",duration:2e3,delay:0});$(".scroll-to").click(function(n){n.preventDefault();var t=$(this).attr("href");$("html, body").animate({scrollTop:$(t).offset().top},1e3)});n=$(".sidebar-fixed");console.log(n);n.innerWidth()!==undefined&&(r=n.offset().top-parseFloat(n.css("margin-top")),i=0,$(window).scroll(function(){u()}));$(window).scrollTop()&&u();$("[data-toggle=offcanvas]").click(function(){$(".row-offcanvas").toggleClass("active");$(".collapse").toggleClass("in").toggleClass("hidden-xs").toggleClass("visible-xs")});$(".card-menu .dropdown-item").click(function(){alert("Demo feature. Not ready yet.")});$("body").on("mouseenter",".lineitem-cell",function(){$(this).find(".trending-percent").fadeIn(500)});$("body").on("mouseleave",".lineitem-cell",function(){$(this).find(".trending-percent").fadeOut()});$("body").on("show.bs.popover",function(){});$("body").on("click",".inline-report .close",function(n){var t=$(n.currentTarget).parents(".inline-report");t.remove()});$(".mdrm-row").on("click",function(n){var t=$(n.currentTarget),f=t.data("url").toLowerCase(),e=t.parents("table").find("th[data-organization]"),r=[],i,u,o;$.each(e,function(n,t){r.push($(t).data("organization"))});t.next().hasClass("inline-report")||(i=$("<tr style='display:none;' class='inline-report'><td class='no-border' colspan='20'><div class='inside'><div class='p-1 text-xs-center'><i class='fa fa-circle-o-notch fa-spin fa-3x fa-fw'><\/i><\/div><\/div><\/td><\/tr>").insertAfter($(n.currentTarget)),u=i.find(".inside"),i.show("slow"),o=$.ajax({url:f,method:"GET",data:{c:r.join(",")}}).done(function(n){u.html(n)}))})});$(function(){$.typeahead({input:".js-typeahead-name",filter:!1,dynamic:!0,minLength:0,searchOnFocus:!0,delay:250,maxItem:20,template:function(){return'<div class="search-result"><div class="media"><i class="media-left"><a href="{{url}}" class="media-object avatar avatar-sm img-responsive" style="background-image: url({{avatar}})"><\/a><\/i><div class="name">{{name}}<br/><small>{{city}}, {{state}} <div class="float-right"><b>{{assets}} Assets<\/b><\/div><\/small><\/div><\/div>'},emptyTemplate:"No results for {{query}}",href:"{{url}}",source:{lenders:{display:"name",ajax:function(){return{url:"/data/search/data",path:"data.snippets",data:{q:"{{query}}"}}}}},callback:{onReady:function(){},onClick:function(n,t,i){window.location=i.url},onSubmit:function(){return!1}}})});$(function(){$("[data-send=json]").click(function(){var t=$(this),i=t.data("name"),r=t.data("value"),n=$("#flash"),u=$.ajax({url:"/data/"+i,cache:!1,data:{id:r}}).done(function(t){console.log("success");var i=JSON.parse(t);n.addClass("alert-success");n.html(i.html);n.animate({height:"6vh",speed:500});setTimeout(function(){n.fadeOut();setTimeout(function(){n.height(0)},1e3)},3e3)}).fail(function(){console.log("error")}).always(function(){console.log("complete")})})});$(function(){Highcharts.theme={colors:["#058DC7","#64E572","#FF9655","#FFF263","#6AF9C4","#50B432","#ED561B","#DDDF00"],chart:{backgroundColor:null,borderWidth:0,style:{overflow:"visible"},skipClone:!0},lang:{thousandsSep:","},title:{text:""},credits:{enabled:!1},xAxis:{lineWidth:0,gridLineWidth:0,gridLineColor:"#eeeeee",type:"datetime",labels:{enabled:!1},title:{text:null},startOnTick:!1,endOnTick:!1,maxPadding:0,minPadding:0,tickPositions:[]},yAxis:{gridLineWidth:0,gridLineColor:"#eeeeee",endOnTick:!1,startOnTick:!1,labels:{enabled:!1},title:{text:null},tickPositions:[]},legend:{enabled:!0,layout:"vertical"},tooltip:{formatter:function(){var t=this.series.name,n=this.key;return $.isNumeric(n)&&(n=""),"<b>"+t+"<\/b><br/><i>"+n+"<\/i><br/>"+Highcharts.dateFormat("%e-%b-%Y",new Date(this.x))+"<br/> Value: "+Highcharts.numberFormat(this.y,0,"",",")+" "}},plotOptions:{pie:{dataLabels:{enabled:!1},showInLegend:!0},areaspline:{pointPlacement:null},column:{pointPadding:0},line:{},series:{enabledMouseTracking:!1,animation:{duration:1750},lineWidth:2,shadow:!1,states:{hover:{lineWidth:2}},marker:{radius:0,symbol:"circle",states:{hover:{radius:5}}},fillOpacity:.25}}};Highcharts.setOptions(Highcharts.theme);var t=null,n=!1;$("body").on("mouseenter",".lineitem-cell,.lineitem-sparkline",function(){if(!n){t=this;var i=this;n=!0;setTimeout(function(){if(t===i){if($(i).find(".lineitem-sparkline").exists()){$(i).find(".lineitem-sparkline").fadeIn();return}var r=$(i).data("series"),n=document.createElement("div");n.className="lineitem-sparkline";$(n).data("series",r);$(i).prepend(n);$(n).highcharts("SparkLine",{plotOptions:{series:{animation:{duration:750}}}})}},200)}});$("body").on("mouseleave",".lineitem-cell",function(){n=!1;var t=this;setTimeout(function(){$(t).find(".lineitem-sparkline").fadeOut()},500)})});$(function(){function n(n){var i=$(n).data("series");console.log(i);var u=google.visualization.arrayToDataTable(i[0].data),t=new google.visualization.DataView(u),f=google.visualization.data.max(t.getDistinctValues(2)),e=t.getFilteredRows([{column:2,minValue:f*.008}]);t.setRows(e);var r=["#a6cee3","#b2df8a","#fb9a99","#fdbf6f","#cab2d6","#ffff99","#1f78b4","#33a02c"],o={tooltip:{isHtml:!0},sankey:{iterations:128,node:{interactivity:!0,nodePadding:15,width:15,colors:r,label:{fontSize:12}},link:{colorMode:"source",colors:r}}},s=new google.visualization.Sankey(n);s.draw(t,o)}$("[data-chart-type='sankey']").each(function(t,i){google.charts.load("current",{packages:["sankey"]});google.charts.setOnLoadCallback(function(){n(i)})});$("[data-chart-type='combo']").each(function(){$(this).highcharts("Combo",{})});$("[data-chart-type='key-ratio']").each(function(){$(this).highcharts("Combo",{chart:{marginBottom:75,spacingBottom:0},plotOptions:{areaspline:{lineWidth:0}},legend:{enabled:!0,layout:"horizontal"},tooltip:{split:!0,useHTML:!0,padding:0,valueDecimals:2,borderWidth:0,headerFormat:"<table class='table'>",pointFormat:"<tr><td><b>${point.y}    <\/b><\/td><td> {point.x:%b %Y}<\/td><\/tr>",footerFormat:"<\/table>",formatter:null,positioner:function(){return{x:-5,y:-100}}},series:[{},{lineWidth:0}]})});$("[data-chart-type='fixed-placement']").each(function(){$(this).highcharts("Combo",{plotOptions:{bar:{grouping:!0,borderWidth:0,groupPadding:0,pointPadding:0}},yAxis:{max:100},series:[{color:"rgba(165,170,217,.5)",pointPadding:.1,zIndex:100},{color:"rgba(126,86,134,.9)",pointPadding:.2},{color:"rgba(186,60,61,.9)",pointPadding:.3}]})});$('[data-chart-type="primary"]').highcharts("Combo",{chart:{marginBottom:85,spacingBottom:0},plotOptions:{areaspline:{lineWidth:0}},lang:{thousandsSep:","},legend:{enabled:!0,layout:"horizontal"},tooltip:{shared:!0,borderWidth:0,shadow:!1,useHTML:!0,valueDecimals:0,headerFormat:"<table class='primary-tooltip table table-sm table-striped'><tr><th colspan='2'>{point.x:%b %e %Y}<\/th><\/th>",pointFormat:"<tr><td style='border-left: 10px solid {point.series.color}'>{point.name}<\/td><td style='text-align: right;'>{point.y}<\/td><\/tr>",footerFormat:"<\/table>",formatter:null,positioner:function(){return{x:0,y:0}}},xAxis:{gridLineWidth:1,tickPositions:null,labels:{enabled:!0}},yAxis:{gridLineWidth:0,tickPositions:null},series:[{fillColor:{linearGradient:{x1:.2,x2:0,y1:0,y2:.75},stops:[[0,Highcharts.Color("#2E96EA").setOpacity(.7).get("rgba")],[1,Highcharts.Color("#30C8CA").setOpacity(.7).get("rgba")]]}}]})});jQuery.fn.exists=function(){return this.length>0};Highcharts.SparkLine=function(n,t,i){var u=typeof n=="string"||n.nodeName,r=arguments[u?1:0],f={chart:{renderTo:r.chart&&r.chart.renderTo||this,margin:[0,0,0,0]},tooltip:{enabled:!1},legend:{enabled:!1},series:[]};return DefaultChart(n,t,i,f)};Highcharts.Combo=function(n,t,i){var u=typeof n=="string"||n.nodeName,r=arguments[u?1:0],f={chart:{renderTo:r.chart&&r.chart.renderTo||this},series:[]};return DefaultChart(n,t,i,f)};