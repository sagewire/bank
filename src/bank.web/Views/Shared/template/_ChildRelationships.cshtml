@using bank.reports
@using bank.poco;

@model TemplateElement

@{
    var org = (Organization)Model.Data;
}

<table class="table table-sm table-responsive table-horizontal table-base">

    <thead>
        <tr class="header-row">
            <td>
                Subsidiaries
                @Html.Partial("_CardMenu")
            </td>
            <td>
                Relationship Start
            </td>
            <td>
                Relationship End
            </td>
        </tr>
    </thead>
    <tbody>
        @foreach (var relationship in org.ChildRelationships)
        {
            <tr>
                <td>
                    @if (relationship.OffspringOrganization != null)
                    {
                        <a href="@Url.Url(relationship.OffspringOrganization)">
                            @relationship.OffspringOrganization.Name
                        </a>
                    }
                    else
                    {
                        <text>Unknown</text>
                    }
                </td>
                <td>@relationship.DateRelationshipStart.Value.ToShortDateString()</td>
                <td>@(relationship.DateRelationshipEnd.HasValue ? relationship.DateRelationshipEnd.Value.ToShortDateString() : "")</td>
            </tr>
        }
    </tbody>
</table>