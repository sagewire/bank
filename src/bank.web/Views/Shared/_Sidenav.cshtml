@{
    var controller = ViewContext.Controller as bank.web.Controllers.ApplicationController;
    var profile = controller.CurrentProfile;
}

<div id="global-sidenav" class="sidenav" data-state="none">


    @if (Request.IsAuthenticated)
    {
        <ul class="nav account-options">
            <li class="nav-item">
                <div class="nav-link">
                    <i class="fa fa-fw fa-user" aria-hidden="true"></i>
                    <a href="@Url.DefaultUrl("dashboard")">
                        Hello @profile.FirstName
                    </a>
                </div>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="@Url.DefaultUrl("account", "settings")" title="Settings"><i class="fa fa-fw fa-cog other-icon" aria-hidden="true"></i></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="@Url.DefaultUrl("account", "signout")" title="Sign out"><i class="fa fa-fw fa-sign-out other-icon" aria-hidden="true"></i></a>
            </li>
        </ul>
    }
    else
    {
        <ul class="nav nav-justified anon-options">
            <li class="nav-item">
                <a class="nav-link sign-in toggle" data-group="account" href="#sidenav-signin">
                    <i class="fa fa-fw fa-sign-in" aria-hidden="true"></i>
                    Sign-in
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link register toggle" data-group="account" href="#sidenav-register">
                    <i class="fa fa-fw fa-pencil-square-o" aria-hidden="true"></i>
                    Register
                </a>
            </li>
        </ul>
        <div class="collapse account" id="sidenav-signin">
            <ul class="nav flex-column">
                <li class="nav-item">
                    <div class="nav-link nav-settings">
                        @Html.Partial("_SignIn")
                    </div>

                </li>
            </ul>
        </div>
        <div class="collapse account" id="sidenav-register">
            <ul class="nav flex-column">
                <li class="nav-item">

                    <div class="nav-link nav-settings">
                        @Html.Partial("_Register")
                    </div>


                </li>
            </ul>
        </div>
    }
    <ul class="nav flex-column">
        <li class="nav-item">
            <div class="typeahead__container">

                <div class="nav-link">
                    <i class="fa fa-fw fa-search" aria-hidden="true"></i>

                    <input id="search-box"
                           type="text"
                           class="js-typeahead-name"
                           placeholder="" autocomplete="off" />
                </div>

            </div>

        </li>


        @if (Request.IsAuthenticated)
        {
            <li class="nav-item">
                <a id="sidenav-dashboard" class="nav-link" href="@Url.DefaultUrl("dashboard")">
                    <i class="fa fa-fw fa-tachometer" aria-hidden="true"></i>
                    Dashboard
                </a>
            </li>
            if (profile.Favorites.Any() || profile.RecentVisits.Any())
            {
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                        <i class="fa fa-fw fa-star-o" aria-hidden="true"></i>
                        Favorites
                    </a>

                    <div class="dropdown-menu">
                        @if (profile.Favorites.Any())
                        {
                            foreach (var fav in profile.Favorites)
                            {
                                <a class="dropdown-item" href="@fav.ProfileUrl">
                                    <i class="fa fa-fw fa-star gold" aria-hidden="true"></i>
                                    @fav.Name
                                </a>
                            }

                            if (profile.RecentVisits.Any())
                            {
                                <div class="dropdown-divider"></div>
                            }

                        }

                        @if (profile.RecentVisits.Any())
                        {

                            <h6 class="dropdown-header">Recent</h6>
                            foreach (var recent in profile.RecentVisits)
                            {
                                <a class="dropdown-item" href="@recent.ProfileUrl">
                                    <i class="fa fa-fw fa-bar-chart" aria-hidden="true"></i>
                                    @recent.Name
                                </a>
                            }
                        }

                    </div>
                </li>
            }
        }
        <li class="nav-item">
            <a class="nav-link" href="#">
                <i class="fa fa-fw fa-line-chart" aria-hidden="true"></i>
                Rankings
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="@Url.RouteUrl("orgs")">
                <i class="fa fa-fw fa-building-o" aria-hidden="true"></i>
                Bank Directory
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link active" href="#">
                <i class="fa fa-fw fa-newspaper-o" aria-hidden="true"></i>
                News
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#">
                <i class="fa fa-fw fa-snowflake-o" aria-hidden="true"></i>
                Community
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#">
                <i class="fa fa-fw fa-envelope-o" aria-hidden="true"></i>
                Contact
            </a>
        </li>
    </ul>

</div>
