<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">
        <link rel="shortcut icon" href="../img/favicon.ico">
        <script src="/js/jquery.min.js"></script>
        <title>jsPlumb Toolkit - documentation</title>
        <link href="//fonts.googleapis.com/css?family=Lato:400,700" rel="stylesheet">
<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<link href="../css/main.css" rel="stylesheet">



        <link rel="stylesheet" href="../css/jsplumb-doc.css">
        <script src="/js/docs.js"></script>
    </head>

    <body>

        <!-- Fixed navbar -->
<div class="navbar navbar-top navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle Navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <a class="navbar-brand" href="../index.html"><img src="../img/logo-medium-jsplumb.png"></a>

        </div>

        <div class="navbar-collapse collapse nav-wrapper">
            <ul class="nav navbar-nav">
                <li><a href="../index.html#demos">DEMOS</a></li>
<li><a href="../doc/home.html">DOCS</a></li>
<li><a href="../apidocs/index.html">APIDOCS</a></li>

            </ul>

            <div class="social-nav hidden-xs">
                <!--a href="#" class="link"><span class="icon-facebook"></span></a-->
<a href="http://twitter.com/jsplumblib" class="link"><span class="icon-twitter"></span></a>
<a href="http://github.com/sporritt/jsplumb/" class="link"><span class="icon-github"></span></a>
<a href="http://www.linkedin.com/company/jsplumb" class="link"><span class="icon-linkedin"></span></a>

            </div>
        </div><!--/.nav-collapse -->
    </div>
</div>


        <div class="container padding-top">
            <div class="row" id="docs">
                <div class="docs-nav col-xs-3" tabindex="0">
                    <ul>
<li><a href="home.html">Home</a></li>
<li><a href="getting-started.html">Getting Started</a></li>
<li><a href="basic-concepts.html">Basic Concepts</a>
    <ul>
        <li><a href="basic-concepts.html#instantiating">Instantiating the Toolkit</a></li>
        <li><a href="basic-concepts.html#basicloading">Loading Data</a></li>
        <li><a href="basic-concepts.html#rendering">Rendering</a></li>
    </ul>
</li>  
<li><a href="data-model.html">Data Model</a>
    <ul>
        <li><a href="data-model.html#format">Data Format</a></li>
        <li><a href="data-model.html#node-edge-port-id">Node, Edge and Port IDs</a></li>
        <li><a href="data-model.html#node-edge-port-type">Node, Edge and Port Type</a></li>
        <li><a href="data-model.html#datafactories">Data Factories</a></li>
    </ul>
</li>  
<li><a href="rendering.html">Rendering</a>
<ul>
    <li><a href="models-and-views.html">Models and Views</a></li>
    <li><a href="templating.html">Templating</a></li>
    <li><a href="layouts.html">Layouts</a></li>
    <li><a href="ui-states.html">UI States</a></li>
    <li><a href="path-tracing.html">Path Tracing</a></li>
    <li><a href="rendering.html#dragpalette">Drag & Drop Nodes</a></li>
    <li><a href="navigation.html">Navigating your Dataset</a></li>
</ul>
</li>
<li>
Data Management
    <ul>
        <li><a href="loading-and-saving-data.html">Loading & Saving Data</a></li>
        <li><a href="loading-and-saving-data.html#loading">Loading</a></li>
        <li><a href="updating-data.html">Updating Data</a></li>
    </ul>
</li>
    
<li><a href="css.html">CSS</a>
    <ul>
        <li><a href="css.html#defaultcss">Default CSS Stylesheet</a></li>
        <li><a href="css.html#ref">Class Reference</a></li>
    </ul>
</li>
  
<li><a href="events.html">Events</a>
    <ul>
        <li><a href="events.html#toolkit">Toolkit Events</a></li>
        <li><a href="events.html#surface">Rendering Events</a></li>
    </ul>
</li>
  
<li>Selecting Content
    <ul>
      <li><a href="selections.html">Selections</a></li>
      <li><a href="paths.html">Paths</a></li>
      <li><a href="filters.html">Filters</a></li>
    </ul>
</li>

<li><a href="angular-integration.html">Angular Integration</a></li>
<li>Demonstrations
    <ul>
      <li><a href="demo-hierarchical.html">Hierarchical Layout</a></li>
      <li><a href="demo-spring.html">Spring Layout</a></li>
      <li><a href="demo-imageWidget.html">Image Widget</a></li>
      <li><a href="demo-circular.html">Circular Layout</a></li>
      <li><a href="demo-multiple.html">Multiple Renderers</a></li>
      <li><a href="demo-paths.html">Path Tracing</a></li>
      <li><a href="demo-absolute.html">Absolute Layout</a></li>
      <li><a href="demo-database-visualizer.html">Database Visualizer</a></li>
      <li><a href="demo-flowchart-builder.html">Flowchart Builder</a></li>
      <li><a href="demo-angular.html">Angular Integration</a></li>
      <li><a href="demo-hello-world.html">Hello World</a></li>
    </ul>
</li>
    
<li><a href="UtilityFunctions.html">Utilities</a></li>
<li><a href="dialogs.html">Dialogs</a></li>
<li><a href="drawing.html">Drawing</a></li>
</ul>
                </div>
                <div class="markdown-body col-xs-9">
                    <h2>Dialogs</h2>

<p>Basic support for dialogs forms part of the Toolkit core. These dialogs provide a simple abstraction around the 
business of getting input from the user and dealing with it. They&#39;re not necessarily fully-featured enough for all 
applications - they were built for the demo pages in the Toolkit - but they do provide a reasonable amount
of functionality for very little effort. </p>

<p>This page provides a discussion of the functionality offered, using the <a href="demo-database-visualizer.html">Database Visualizer</a> application for reference.</p>

<ul>
<li><a href="#init">Initialization</a></li>
<li><a href="#templates">Templates</a></li>
<li><a href="#show">Showing a Dialog</a></li>
<li><a href="#positioning">Dialog Positions</a></li>
<li><a href="#supported-types">Supported Input Types</a></li>
<li><a href="#titles">Dialog Titles</a></li>
<li><a href="#label">Custom Button Labels</a></li>
<li><a href="#callbacks">Lifecycle Callbacks</a></li>
<li><a href="#closing">Closing via Enter key</a></li>
<li><a href="#css">CSS Classes</a></li>
</ul>

<p><a name="init"></a></p>

<h3>Initialization</h3>

<p>To initialize the dialogs, first call <code>jsPlumbToolkit.Dialogs.initialize</code>, with an appropriate selector for the templates for your dialogs (see below for an explanation of this):</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">jsPlumbToolkit</span><span class="p">.</span><span class="nx">Dialogs</span><span class="p">.</span><span class="nx">initialize</span><span class="p">({</span>
  <span class="nx">selector</span><span class="o">:</span><span class="s2">&quot;.dlg&quot;</span>
<span class="p">});</span>
</code></pre></div>
<p><a name="templates"></a></p>

<h3>Templates</h3>

<p>Each dialog has a template in the HTML, with some class name that you matched in the <code>selector</code> argument to the <code>initialize</code> call above:</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;script</span> <span class="na">type=</span><span class="s">&quot;jtk&quot;</span> <span class="na">class=</span><span class="s">&quot;dlg&quot;</span> <span class="na">id=</span><span class="s">&quot;dlgViewQuery&quot;</span> <span class="na">title=</span><span class="s">&quot;Edit Query&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;textarea</span> <span class="na">class=</span><span class="s">&quot;txtViewQuery&quot;</span> <span class="err">jtk-focus</span> <span class="na">jtk-att=</span><span class="s">&quot;query&quot;</span><span class="nt">&gt;</span>${query}<span class="nt">&lt;/textarea&gt;</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div>
<p>In fact it doesn&#39;t necessarily need to be a class name that identifies your dialog templates - any valid selector will work. The code uses <code>document.querySelectorAll</code> to retrieve matching elements.</p>

<h4>Binding Parameters</h4>

<p>These templates use the same template engine as the Surface renderer, so in this example you can see we&#39;ve extracted <code>query</code> from a View node&#39;s data, and injected it into the <code>textarea</code>. But what might not be immediately obvious is the purpose of the <code>jtk-att</code> attribute: it tells the dialog code that the value of this textarea should be passed to the OK handler, using the key <code>query</code>.</p>

<p>Note also in the above example, the <code>jtk-focus</code> attribute: this tells the dialog handler that the textarea should be given the focus when the dialog first opens.</p>

<p><a name="show"></a></p>

<h3>Showing a dialog</h3>

<p>This example is the dialog that is shown when you edit a View query in the Database Visualizer. We provide the id of the template to use for the dialog, and we provide the View node&#39;s data as the backing data for the dialog. Then we provide an <code>onOK</code> callback.</p>

<h6>View Node</h6>

<p><img src="database-view-node.png" alt="View Node"></p>

<h6>Dialog Opening Code</h6>

<p>We register a <code>tap</code> listener on the pencil icon in the upper right corner and then inside the event handler we find the Toolkit object related to the clicked icon, then open a dialog to edit it.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nb">document</span><span class="p">,</span> <span class="s2">&quot;tap&quot;</span><span class="p">,</span> <span class="s2">&quot;.view .edit i&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">info</span> <span class="o">=</span> <span class="nx">renderer</span><span class="p">.</span><span class="nx">getObjectInfo</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="nx">jsPlumbToolkit</span><span class="p">.</span><span class="nx">Dialogs</span><span class="p">.</span><span class="nx">show</span><span class="p">({</span>
    <span class="nx">id</span><span class="o">:</span><span class="s2">&quot;dlgViewQuery&quot;</span><span class="p">,</span>
    <span class="nx">data</span><span class="o">:</span><span class="nx">info</span><span class="p">.</span><span class="nx">obj</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span>
    <span class="nx">onOK</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// update data</span>
      <span class="nx">toolkit</span><span class="p">.</span><span class="nx">updateNode</span><span class="p">(</span><span class="nx">info</span><span class="p">.</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<h6>Dialog</h6>

<p><img src="database-edit-view-query.png" alt="Edit View Query Dialog"></p>

<h6>onOK Callback</h6>

<p>The <code>data</code> argument to the <code>onOK</code> callback consists of an object whose key value pairs are determined by the <code>jtk-att</code> attributes found in the template. Recall that above we had a textarea with <code>jtk-att:&quot;query&quot;</code>. This means that the <code>data</code> argument to <code>onOK</code> looks like this:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">{</span>
  <span class="nx">query</span><span class="o">:</span><span class="s2">&quot;the contents of the text area&quot;</span>
<span class="p">}</span>
</code></pre></div>
<p><a name="positioning"></a></p>

<h4>Dialog Positions</h4>

<p>Dialogs may be positioned in one of four locations: top, bottom, left or right. In each location the dialog is centered in the other axis, eg. for <code>top</code>, the dialog is positioned at the top of the viewport and centered in the X axis.</p>

<p>The default position is <code>top</code>. You can provide a <code>position</code> parameter to the <code>show</code> method to specify a different location:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">jsPlumbToolkit</span><span class="p">.</span><span class="nx">Dialogs</span><span class="p">.</span><span class="nx">show</span><span class="p">({</span>
  <span class="nx">id</span><span class="o">:</span><span class="s2">&quot;dlgViewQuery&quot;</span><span class="p">,</span>
  <span class="nx">data</span><span class="o">:</span><span class="nx">info</span><span class="p">.</span><span class="nx">obj</span><span class="p">.</span><span class="nx">data</span>
  <span class="nx">position</span><span class="o">:</span><span class="s2">&quot;bottom&quot;</span>
<span class="p">});</span>
</code></pre></div>
<p>The vast majority of the positioning of these dialogs is controlled through the CSS in <code>jsPlumbToolkit-defaults.css</code>. The only exception is the code that keeps the dialog centered in the minor axis when the viewport is resized. CSS is <a href="#css">discussed below</a>.</p>

<p><a name="supported-types"></a></p>

<h4>Supported Input Types</h4>

<p>The list of supported input types is:</p>

<ul>
<li>text</li>
<li>radio button(s) </li>
<li>checkbox</li>
<li>select</li>
<li>textarea</li>
</ul>

<p><a name="titles"></a></p>

<h4>Dialog Titles</h4>

<p>If you set a <code>title</code> attribute on a dialog&#39;s template, that value will be used for the title of the dialog. Alternatively, you can provide a <code>title</code> parameter to the <code>show</code> call.</p>

<p><a name="label"></a></p>

<h4>Custom Button Labels</h4>

<p>The default button labels are &quot;OK&quot; and &quot;Cancel&quot;. This can be overridden with the <code>labels</code> parameter on a <code>show</code> method call:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">jsPlumbToolkit</span><span class="p">.</span><span class="nx">Dialogs</span><span class="p">.</span><span class="nx">show</span><span class="p">({</span>
  <span class="nx">id</span><span class="o">:</span><span class="s2">&quot;dlgViewQuery&quot;</span><span class="p">,</span>
  <span class="nx">data</span><span class="o">:</span><span class="nx">info</span><span class="p">.</span><span class="nx">obj</span><span class="p">.</span><span class="nx">data</span>
  <span class="nx">position</span><span class="o">:</span><span class="s2">&quot;bottom&quot;</span><span class="p">,</span>
  <span class="nx">labels</span><span class="o">:</span><span class="p">{</span>
    <span class="nx">ok</span><span class="o">:</span><span class="s2">&quot;Yes&quot;</span><span class="p">,</span>
    <span class="nx">cancel</span><span class="o">:</span><span class="s2">&quot;No&quot;</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p><a name="callbacks"></a></p>

<h4>Lifecycle Callbacks</h4>

<p>There are five lifecycle callbacks supported:</p>

<ul>
<li><strong>onOpen</strong> Called when the dialog has been opened. The related DOM element for the dialog is passed to this method.</li>
<li><strong>onMaybeClose</strong> Called prior to <code>onOK</code>, with the same data that will be passed to <code>onOK</code>. If you return false from this, the dialog stays open.</li>
<li><strong>onOK</strong> Called when the user presses OK. The callback is provided a data object as discussed above.</li>
<li><strong>onCancel</strong> Called when the user presses cancel. No arguments are provided to the callback.</li>
<li><strong>onClose</strong> Called when dialog has been closed, regardless of how it was closed. No arguments are provided to the callback.</li>
</ul>

<p><a name="global"></a></p>

<h4>Global Lifecycle Callbacks</h4>

<p>In addition to providing callbacks to each <code>show</code> call, you can register a callback for each of these four events
 that will be called for every dialog show:</p>

<ul>
<li><strong>onOpen</strong> </li>
<li><strong>onOK</strong> </li>
<li><strong>onCancel</strong> </li>
<li><strong>onClose</strong> </li>
</ul>

<p>You provide these in a <code>globals</code> argument to the <code>initialize</code> method:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">jsPlumbToolkit</span><span class="p">.</span><span class="nx">Dialogs</span><span class="p">.</span><span class="nx">initialize</span><span class="p">({</span>
  <span class="nx">selector</span><span class="o">:</span><span class="s2">&quot;.myDialog&quot;</span><span class="p">,</span>
  <span class="nx">globals</span><span class="o">:</span><span class="p">{</span>
    <span class="nx">onOpen</span><span class="o">:</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;a dialog was opened&quot;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">onClose</span><span class="o">:</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;a dialog was closed.&quot;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p><a name="closing"></a></p>

<h4>Closing via Enter key</h4>

<h5>Text Input Elements</h5>

<p>You can set the <code>jtk-commit</code> attribute on any text <code>input</code> elements that you&#39;d like to have close (and persist) the dialog when the user presses the enter key:</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;script</span> <span class="na">type=</span><span class="s">&quot;jtk&quot;</span> <span class="na">class=</span><span class="s">&quot;dlg&quot;</span> <span class="na">id=</span><span class="s">&quot;dlgViewQuery&quot;</span> <span class="na">title=</span><span class="s">&quot;Edit Query&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">class=</span><span class="s">&quot;txtViewQuery&quot;</span> <span class="err">jtk-focus</span> <span class="na">jtk-att=</span><span class="s">&quot;query&quot;</span> <span class="na">jtk-commit=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;&lt;/input&gt;</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div>
<h5>Textarea Elements</h5>

<p>For <code>textarea</code> elements you can also use the <code>jtk-commit</code> attribute, but in this case you need to press <strong>ctrl+enter</strong> to close the dialog.</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;script</span> <span class="na">type=</span><span class="s">&quot;jtk&quot;</span> <span class="na">class=</span><span class="s">&quot;dlg&quot;</span> <span class="na">id=</span><span class="s">&quot;dlgViewQuery&quot;</span> <span class="na">title=</span><span class="s">&quot;Edit Query&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;textarea</span> <span class="na">class=</span><span class="s">&quot;txtViewQuery&quot;</span> <span class="err">jtk-focus</span> <span class="na">jtk-att=</span><span class="s">&quot;query&quot;</span> <span class="na">jtk-commit=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;&lt;/textarea&gt;</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div>
<p><a name="css"></a></p>

<h4>CSS Classes</h4>

<p>This is the full list of classes used by the dialog code.  There are defaults for these declared in <strong>jsPlumbToolkit-defaults.css</strong>.</p>

<table>
<tr><th>Class</th><th>Explanation</th></tr>
<tr><td>jtk-dialog-underlay</td><td>The element that acts as the modal "mask"</td></tr>
<tr><td>jtk-dialog-overlay</td><td>The element that acts as the parent for dialog content</td></tr>
<tr><td>jtk-dialog-overlay-visible</td><td>Assigned to an overlay when the dialog is visible</td></tr>
<tr><td>jtk-dialog-overlay-x</td><td>Assigned to dialogs appearing in the `top` or `bottom` positions.</td></tr>
<tr><td>jtk-dialog-overlay-y</td><td>Assigned to dialogs appearing in the `left` or `right` positions.</td></tr>
<tr><td>jtk-dialog-overlay-top</td><td>Assigned to dialogs appearing in the `top` position</td></tr>
<tr><td>jtk-dialog-overlay-bottom</td><td>Assigned to dialogs appearing in the `bottom` position</td></tr>
<tr><td>jtk-dialog-overlay-left</td><td>Assigned to dialogs appearing in the `left` position</td></tr>
<tr><td>jtk-dialog-overlay-right</td><td>Assigned to dialogs appearing in the `right` position.</td></tr>
<tr><td>jtk-dialog-buttons</td><td>Button container element</td></tr>
<tr><td>jtk-dialog-button</td><td>An individual button in a dialog</td></tr>
<tr><td>jtk-dialog-title</td><td>The titlebar of a dialog</td></tr>
<tr><td>jtk-dialog-content</td><td>The content of a dialog (does not contain the titlebar)</td></tr>
</table>

<p>The default CSS stylesheet also contains several rules such as hover states etc. You may wish to keep that in mind when you write your app-specific overrides.</p>

                </div>
            </div>
        </div>

    </body>

</html>
